"use strict";var nCUNITS={_dummy_:null};nCUNITS.price_min=function(){return Number($('#price-min').val())};nCUNITS.price_max=function(){return Number($('#price-max').val())};nCUNITS.service_area_min=function(){return Number($('#service_area-min').val())};nCUNITS.service_area_max=function(){return Number($('#service_area-max').val())};nCUNITS.noise_level_min=function(){return Number($('#noise_level-min').val())};nCUNITS.noise_level_max=function(){return Number($('#noise_level-max').val())};nCUNITS.power_cooling_min=function(){return Number($('#power_cooling-min').val())};nCUNITS.power_cooling_max=function(){return Number($('#power_cooling-max').val())};nCUNITS.power_heating_min=function(){return Number($('#power_heating-min').val())};nCUNITS.power_heating_max=function(){return Number($('#power_heating-max').val())};nCUNITS.filter_price_init=function(){var v_step=Number($("#cunits-filter-price-min").attr('step')); $("#cunits-filter-price-min").attr('min',nCUNITS.price_min()); $("#cunits-filter-price-min").attr('max',nCUNITS.price_max()); $("#cunits-filter-price-min").val(nCUNITS.price_min); $("#cunits-filter-price-max").attr('min',nCUNITS.price_min()); $("#cunits-filter-price-max").attr('max',nCUNITS.price_max()); $("#cunits-filter-price-max").val(nCUNITS.price_min());var v_units_filter_price_min=parseInt($("#cunits-filter-price-min").attr('min').trim(),10);var v_units_filter_price_max=parseInt($("#cunits-filter-price-max").attr('max').trim(),10); $("#cunits-filter-price-slider").slider({animate:true,values:[v_units_filter_price_min,v_units_filter_price_max],range:true,min:v_units_filter_price_min,max:v_units_filter_price_max,step:v_step,slide:function(event,ui){ $("#cunits-filter-price-min").val(ui.values[0]); $("#cunits-filter-price-max").val(ui.values[1])},change:function(event,ui){ $("#cunits-filter-price-min").val(ui.values[0]); $("#cunits-filter-price-max").val(ui.values[1])}}); $('#cunits-filter-price-min').change(function(e){ $('#cunits-filter-price-slider').slider("values",0, $(this).val())}); $('#cunits-filter-price-max').change(function(e){ $('#cunits-filter-price-slider').slider("values",1, $(this).val())}); $('#cunits-filter-price-min').change(); $('#cunits-filter-price-max').change()};nCUNITS.filter_price_reset=function(){ $("#cunits-filter-price-min").attr('min',nCUNITS.price_min()); $("#cunits-filter-price-min").attr('max',nCUNITS.price_max()); $("#cunits-filter-price-min").val(nCUNITS.price_min); $("#cunits-filter-price-max").attr('min',nCUNITS.price_min()); $("#cunits-filter-price-max").attr('max',nCUNITS.price_max()); $("#cunits-filter-price-max").val(nCUNITS.price_min()); $('#cunits-filter-price-slider').slider("values",0,nCUNITS.price_min()); $('#cunits-filter-price-slider').slider("values",1,nCUNITS.price_max()); $('#cunits-filter-price-min').change(); $('#cunits-filter-price-max').change()};nCUNITS.filter_service_area_init=function(){var v_step=Number($("#cunits-filter-service_area-min").attr('step')); $("#cunits-filter-service_area-min").attr('min',nCUNITS.service_area_min()); $("#cunits-filter-service_area-max").attr('max',nCUNITS.service_area_max());var v_units_filter_service_area_min=parseInt($("#cunits-filter-service_area-min").attr('min').trim(),10);var v_units_filter_service_area_max=parseInt($("#cunits-filter-service_area-max").attr('max').trim(),10); $("#cunits-filter-service_area-slider").slider({animate:true,values:[v_units_filter_service_area_min,v_units_filter_service_area_max],range:true,min:v_units_filter_service_area_min,max:v_units_filter_service_area_max,step:v_step,slide:function(event,ui){ $("#cunits-filter-service_area-min").val(ui.values[0]); $("#cunits-filter-service_area-max").val(ui.values[1])},change:function(event,ui){ $("#cunits-filter-service_area-min").val(ui.values[0]); $("#cunits-filter-service_area-max").val(ui.values[1])}}); $('#cunits-filter-service_area-min').change(function(e){ $('#cunits-filter-service_area-slider').slider("values",0, $(this).val())}); $('#cunits-filter-service_area-max').change(function(e){ $('#cunits-filter-service_area-slider').slider("values",1, $(this).val())}); $('#cunits-filter-service_area-min').change(); $('#cunits-filter-service_area-max').change()};nCUNITS.filter_service_area_reset=function(){ $("#cunits-filter-service_area-min").attr('min',nCUNITS.service_area_min()); $("#cunits-filter-service_area-max").attr('max',nCUNITS.service_area_max()); $('#cunits-filter-service_area-slider').slider("values",0,CUNITS.service_area_min()); $('#cunits-filter-service_area-slider').slider("values",1,CUNITS.service_area_max()); $('#cunits-filter-service_area-min').change(); $('#cunits-filter-service_area-max').change()};nCUNITS.filter_noise_level_init=function(){var v_step=Number($("#cunits-filter-noise_level-min1").attr('step')); $("#cunits-filter-noise_level-min1").attr('min',nCUNITS.noise_level_min()); $("#cunits-filter-noise_level-min1").attr('max',nCUNITS.noise_level_max()); $("#cunits-filter-noise_level-min2").attr('min',nCUNITS.noise_level_min()); $("#cunits-filter-noise_level-min2").attr('max',nCUNITS.noise_level_max()); $("#cunits-filter-noise_level-min1").val(nCUNITS.noise_level_min()); $("#cunits-filter-noise_level-min2").val(nCUNITS.noise_level_max()); $("#cunits-filter-noise_level-max1").attr('min',nCUNITS.noise_level_min()); $("#cunits-filter-noise_level-max1").attr('max',nCUNITS.noise_level_max()); $("#cunits-filter-noise_level-max2").attr('min',nCUNITS.noise_level_min()); $("#cunits-filter-noise_level-max2").attr('max',nCUNITS.noise_level_max()); $("#cunits-filter-noise_level-max1").val(nCUNITS.noise_level_min()); $("#cunits-filter-noise_level-max2").val(nCUNITS.noise_level_max());var v_units_filter_noise_level_min1=Number($("#cunits-filter-noise_level-min1").attr('min'));var v_units_filter_noise_level_min2=Number($("#cunits-filter-noise_level-min2").attr('max')); $("#cunits-filter-noise_level-min-slider").slider({animate:true,values:[v_units_filter_noise_level_min1,v_units_filter_noise_level_min2],range:true,min:v_units_filter_noise_level_min1,max:v_units_filter_noise_level_min2,step:v_step,slide:function(p_event,p_ui){ $("#cunits-filter-noise_level-min1").val(p_ui.values[0]); $("#cunits-filter-noise_level-min2").val(p_ui.values[1])},change:function(p_event,p_ui){ $("#cunits-filter-noise_level-min1").val(p_ui.values[0]); $("#cunits-filter-noise_level-min2").val(p_ui.values[1])}}); $('#cunits-filter-noise_level-min1').change(function(p_event){ $('#cunits-filter-noise_level-min-slider').slider("values",0, $(this).val())}); $('#cunits-filter-noise_level-min2').change(function(p_event){ $('#cunits-filter-noise_level-min-slider').slider("values",1, $(this).val())});var v_units_filter_noise_level_max1=Number($("#cunits-filter-noise_level-max1").attr('min'));var v_units_filter_noise_level_max2=Number($("#cunits-filter-noise_level-max2").attr('max')); $("#cunits-filter-noise_level-max-slider").slider({animate:true,values:[v_units_filter_noise_level_max1,v_units_filter_noise_level_max2],range:true,min:v_units_filter_noise_level_max1,max:v_units_filter_noise_level_max2,step:1,slide:function(p_event,p_ui){ $("#cunits-filter-noise_level-max1").val(p_ui.values[0]); $("#cunits-filter-noise_level-max2").val(p_ui.values[1])},change:function(p_event,p_ui){ $("#cunits-filter-noise_level-max1").val(p_ui.values[0]); $("#cunits-filter-noise_level-max2").val(p_ui.values[1])}}); $('#cunits-filter-noise_level-max1').change(function(p_e){ $('#cunits-filter-noise_level-max-slider').slider("values",0, $(this).val())}); $('#cunits-filter-noise_level-max2').change(function(p_e){ $('#cunits-filter-noise_level-max-slider').slider("values",1, $(this).val())}); $('#cunits-filter-noise_level-min1').change(); $('#cunits-filter-noise_level-min2').change(); $('#cunits-filter-noise_level-max1').change(); $('#cunits-filter-noise_level-max2').change()};nCUNITS.filter_noise_level_reset=function(){ $("#cunits-filter-noise_level-min1").attr('min',nCUNITS.noise_level_min()); $("#cunits-filter-noise_level-min1").attr('max',nCUNITS.noise_level_max()); $("#cunits-filter-noise_level-min2").attr('min',nCUNITS.noise_level_min()); $("#cunits-filter-noise_level-min2").attr('max',nCUNITS.noise_level_max()); $("#cunits-filter-noise_level-min1").val(nCUNITS.noise_level_min()); $("#cunits-filter-noise_level-min2").val(nCUNITS.noise_level_max()); $("#cunits-filter-noise_level-max1").attr('min',nCUNITS.noise_level_min()); $("#cunits-filter-noise_level-max1").attr('max',nCUNITS.noise_level_max()); $("#cunits-filter-noise_level-max2").attr('min',nCUNITS.noise_level_min()); $("#cunits-filter-noise_level-max2").attr('max',nCUNITS.noise_level_max()); $("#cunits-filter-noise_level-max1").val(nCUNITS.noise_level_min()); $("#cunits-filter-noise_level-max2").val(nCUNITS.noise_level_max()); $('#cunits-filter-noise_level-min-slider').slider("values",0,nCUNITS.noise_level_min()); $('#cunits-filter-noise_level-min-slider').slider("values",1,nCUNITS.noise_level_max()); $('#cunits-filter-noise_level-max-slider').slider("values",0,nCUNITS.noise_level_min()); $('#cunits-filter-noise_level-max-slider').slider("values",1,nCUNITS.noise_level_max()); $('#cunits-filter-noise_level-min1').change(); $('#cunits-filter-noise_level-min2').change(); $('#cunits-filter-noise_level-max1').change(); $('#cunits-filter-noise_level-max2').change()};nCUNITS.filter_power_cooling_init=function(){var v_step=Number($("#cunits-filter-power_cooling-min").attr('step')); $("#cunits-filter-power_cooling-min").attr('min',nCUNITS.power_cooling_min()); $("#cunits-filter-power_cooling-min").attr('max',nCUNITS.power_cooling_max()); $("#cunits-filter-power_cooling-min").val(nCUNITS.power_cooling_min()); $("#cunits-filter-power_cooling-max").attr('min',nCUNITS.power_cooling_min()); $("#cunits-filter-power_cooling-max").attr('max',nCUNITS.power_cooling_max()); $("#cunits-filter-power_cooling-max").val(nCUNITS.power_cooling_max());var v_units_filter_power_cooling_min=$("#cunits-filter-power_cooling-min").attr('min')*1;var v_units_filter_power_cooling_max=$("#cunits-filter-power_cooling-max").attr('max')*1; $("#cunits-filter-power_cooling-slider").slider({animate:true,values:[v_units_filter_power_cooling_min,v_units_filter_power_cooling_max],range:true,min:v_units_filter_power_cooling_min,max:v_units_filter_power_cooling_max,step:v_step,slide:function(event,ui){ $("#cunits-filter-power_cooling-min").val(ui.values[0]); $("#cunits-filter-power_cooling-max").val(ui.values[1])},change:function(event,ui){ $("#cunits-filter-power_cooling-min").val(ui.values[0]); $("#cunits-filter-power_cooling-max").val(ui.values[1])}}); $('#cunits-filter-power_cooling-min').change(function(e){ $('#cunits-filter-power_cooling-slider').slider("values",0, $(this).val())}); $('#cunits-filter-power_cooling-max').change(function(e){ $('#cunits-filter-power_cooling-slider').slider("values",1, $(this).val())}); $('#cunits-filter-power_cooling-min').change(); $('#cunits-filter-power_cooling-max').change()};nCUNITS.filter_power_cooling_reset=function(){ $("#cunits-filter-power_cooling-min").attr('min',nCUNITS.power_cooling_min()); $("#cunits-filter-power_cooling-min").attr('max',nCUNITS.power_cooling_max()); $("#cunits-filter-power_cooling-min").val(nCUNITS.power_cooling_min()); $("#cunits-filter-power_cooling-max").attr('min',nCUNITS.power_cooling_min()); $("#cunits-filter-power_cooling-max").attr('max',nCUNITS.power_cooling_max()); $("#cunits-filter-power_cooling-max").val(nCUNITS.power_cooling_max()); $('#cunits-filter-power_cooling-slider').slider("values",0,nCUNITS.power_cooling_min()); $('#cunits-filter-power_cooling-slider').slider("values",1,nCUNITS.power_cooling_max()); $('#cunits-filter-power_cooling-min').change(); $('#cunits-filter-power_cooling-max').change()};nCUNITS.filter_power_heating_init=function(){var v_step=Number($("#cunits-filter-power_heating-min").attr('step')); $("#cunits-filter-power_heating-min").attr('min',nCUNITS.power_heating_min()); $("#cunits-filter-power_heating-min").attr('max',nCUNITS.power_heating_max()); $("#cunits-filter-power_heating-min").val(nCUNITS.power_heating_min()); $("#cunits-filter-power_heating-max").attr('min',nCUNITS.power_heating_min()); $("#cunits-filter-power_heating-max").attr('max',nCUNITS.power_heating_max()); $("#cunits-filter-power_heating-max").val(nCUNITS.power_heating_max());var v_units_filter_power_heating_min=$("#cunits-filter-power_heating-min").attr('min')*1;var v_units_filter_power_heating_max=$("#cunits-filter-power_heating-max").attr('max')*1; $("#cunits-filter-power_heating-slider").slider({animate:true,values:[v_units_filter_power_heating_min,v_units_filter_power_heating_max],range:true,min:v_units_filter_power_heating_min,max:v_units_filter_power_heating_max,step:v_step,slide:function(event,ui){ $("#cunits-filter-power_heating-min").val(ui.values[0]); $("#cunits-filter-power_heating-max").val(ui.values[1])},change:function(event,ui){ $("#cunits-filter-power_heating-min").val(ui.values[0]); $("#cunits-filter-power_heating-max").val(ui.values[1])}}); $('#cunits-filter-power_heating-min').change(function(e){ $('#cunits-filter-power_heating-slider').slider("values",0, $(this).val())}); $('#cunits-filter-power_heating-max').change(function(e){ $('#cunits-filter-power_heating-slider').slider("values",1, $(this).val())}); $('#cunits-filter-power_heating-min').change(); $('#cunits-filter-power_heating-max').change()};nCUNITS.filter_power_heating_reset=function(){ $("#cunits-filter-power_heating-min").attr('min',nCUNITS.power_heating_min()); $("#cunits-filter-power_heating-min").attr('max',nCUNITS.power_heating_max()); $("#cunits-filter-power_heating-min").val(nCUNITS.power_heating_min()); $("#cunits-filter-power_heating-max").attr('min',nCUNITS.power_heating_min()); $("#cunits-filter-power_heating-max").attr('max',nCUNITS.power_heating_max()); $("#cunits-filter-power_heating-max").val(nCUNITS.power_heating_max()); $('#cunits-filter-power_heating-slider').slider("values",0,nCUNITS.power_heating_min()); $('#cunits-filter-power_heating-slider').slider("values",1,nCUNITS.power_heating_max()); $('#cunits-filter-power_heating-min').change(); $('#cunits-filter-power_heating-max').change()};nCUNITS.filter_init=function(){nCUNITS.filter_price_init();nCUNITS.filter_noise_level_init();nCUNITS.filter_power_cooling_init();nCUNITS.filter_power_heating_init()};nCUNITS.filter_reset=function(){nCUNITS.filter_price_reset();nCUNITS.filter_noise_level_reset();nCUNITS.filter_power_cooling_reset();nCUNITS.filter_power_heating_reset(); $('#cunits-filter-manufacturer input[type=checkbox]').each(function(){if(!$(this).is(':checked')){ $(this).prop('checked',true); $(this).trigger('change')}}); $('#cunits-filter-work_mode input[type=checkbox]').each(function(){if(!$(this).is(':checked')){ $(this).prop('checked',true); $(this).trigger('change')}}); $('#cunits-filter-btype input[type=checkbox]').each(function(){if(!$(this).is(':checked')){ $(this).prop('checked',true); $(this).trigger('change')}})};nCUNITS.get_manufactures_on=function(){var v_manufactures={}; $('#cunits-filter-manufacturer input[name=filter-manufacturer]:checked').each(function(){v_manufactures[this.value]=true});return v_manufactures};nCUNITS.get_btypes_on=function(){var v_btypes={}; $('#cunits-filter-btype input[name=filter-btype]:checked').each(function(){v_btypes[this.value]=true});return v_btypes};nCUNITS.filter_use=function(){var v_filter={};v_filter.price_min=$("#cunits-filter-price-min").val();v_filter.price_max=$("#cunits-filter-price-max").val();v_filter.service_area_min=Number($("#cunits-filter-service_area-min").val().trim());v_filter.service_area_max=Number($("#cunits-filter-service_area-max").val().trim());v_filter.noise_level_min1=Number($("#cunits-filter-noise_level-min1").val().trim());v_filter.noise_level_min2=Number($("#cunits-filter-noise_level-min2").val().trim());v_filter.noise_level_max1=Number($("#cunits-filter-noise_level-max1").val().trim());v_filter.noise_level_max2=Number($("#cunits-filter-noise_level-max2").val().trim());v_filter.power_cooling_min=Number($('#cunits-filter-power_cooling-min').val().trim())*1000;v_filter.power_cooling_max=Number($('#cunits-filter-power_cooling-max').val().trim())*1000;v_filter.power_heating_min=Number($('#cunits-filter-power_heating-min').val().trim())*1000;v_filter.power_heating_max=Number($('#cunits-filter-power_heating-max').val().trim())*1000;var v_cold_only=$('#cunits-filter-work_mode1').is(':checked');var v_cold_and_heat=$('#cunits-filter-work_mode2').is(':checked');var v_manufacturers=nCUNITS.get_manufactures_on();var v_btypes=nCUNITS.get_btypes_on();var v_show=0,v_hidden=0; $('#cunits-list .units-item').each(function(){var v_self=$(this);var v_unit=v_self.find('.unit-item-buy');if(v_unit){var v_data=v_unit.data();if(!v_manufacturers[v_data.manufacturer]){v_hidden++;v_self.hide();return}if(!v_btypes[v_data.btype]){v_hidden++;v_self.hide();return}if(!v_cold_only&&Number(v_data.hpower)===0){v_hidden++;v_self.hide();return}if(!v_cold_and_heat&&Number(v_data.hpower)>0){v_hidden++;v_self.hide();return}if((Number(v_data.rub)<v_filter.price_min)||(Number(v_data.rub)>v_filter.price_max)){v_hidden++;v_self.hide();return}if((Number(v_data.cpower)<v_filter.power_cooling_min)||(Number(v_data.cpower)>v_filter.power_cooling_max)){v_hidden++;v_self.hide();return}if((v_data.conly==='0')&&((Number(v_data.hpower)<v_filter.power_heating_min)||(Number(v_data.hpower)>v_filter.power_heating_max))){v_hidden++;v_self.hide();return}v_self.show();v_show++}});nCUNITS.tollbar_counts_set(v_show,v_hidden)};nCUNITS.tollbar_counts_get=function(){return{show:parseInt($('#cunits-counts-show').text().trim(),10),hidden:parseInt($('#cunits-counts-hidden').text().trim(),10)}};nCUNITS.tollbar_counts_set=function(p_show,p_hidden){ $('#cunits-counts-show').text(p_show.toString()); $('#cunits-counts-hidden').text(p_hidden.toString())};nCUNITS.toolbar_show_table=function(){ $('#units-toolbar-show-table').css({color:'#000000'}); $('#units-toolbar-show-tile').css({color:'#bbbbbb'})};nCUNITS.toolbar_show_tile=function(){ $('#units-toolbar-show-table').css({color:'#bbbbbb'}); $('#units-toolbar-show-tile').css({color:'#000000'})}; $(document).ready(function(){nCONSOLE.on();nPOPUPMENU.init('#units-toolbar-sort');nPOPUPMENU.init('#-units-toolbar-psize');if($('#req-format').val()==='table'){nCUNITS.toolbar_show_table()}else{nCUNITS.toolbar_show_tile()}nPOPUPMENU.set('#units-toolbar-sort', $('#req-sort').val());nPOPUPMENU.change('#units-toolbar-sort',function(){var v_args=$.getUrlVars();v_args.sort=$('#units-toolbar-sort').data('value');var v_params=$.buildParams(v_args,true);var v_url=window.location.origin+window.location.pathname;window.location.href=v_url+v_params});nPOPUPMENU.change('#-units-toolbar-psize',function(){var v_args=$.getUrlVars();v_args.psize=$('#units-toolbar-psize').data('value');var v_params=$.buildParams(v_args,true);var v_url=window.location.origin+window.location.pathname;window.location.href=v_url+v_params}); $('#units-toolbar-show-tile').click(function(p_event){p_event.preventDefault();var v_args=$.getUrlVars();v_args.f='tile';var v_params=$.buildParams(v_args,true);var v_url=window.location.origin+window.location.pathname;window.location.href=v_url+v_params}); $('#units-toolbar-show-table').click(function(p_event){p_event.preventDefault();var v_args=$.getUrlVars();v_args.f='table';var v_params=$.buildParams(v_args,true);var v_url=window.location.origin+window.location.pathname;window.location.href=v_url+v_params}); $('#cunits-filter-manufacturer-pop').click(function(){}); $('#cunits-filter-manufacturer-all').click(function(){}); $("#cunits-list").on('click','.unit-item-buy',function(p_event){p_event.stopPropagation();var v_data=$(this).data();nBASKET.add(v_data)}); $('#cunits-filter-manufacturer').on('change','input[type=checkbox]',function(){nCUNITS.filter_use();return}); $('#cunits-filter-work_mode').on('change','input[type=checkbox]',function(){nCUNITS.filter_use();return}); $('#cunits-filter-btype').on('change','input[type=checkbox]',function(){nCUNITS.filter_use();return}); $('#units-toolbar-image').click(function(p_event){p_event.preventDefault()});nCUNITS.filter_init(); $('#cunits-filter-use').click(nCUNITS.filter_use); $('#cunits-filter-clear').click(function(){nCUNITS.filter_reset();nCUNITS.filter_use()});nUSER.init();var v_params=$.getUrlVars();if(v_params.m){var v_m=v_params.m.split(',');var v_manufacturers={};for(var v_i=0;v_i<v_m.length;v_i++){v_manufacturers[unescape(v_m[v_i])]=true} $('#cunits-filter-manufacturer input[name=filter-manufacturer]').each(function(){ $(this).prop('checked',(v_manufacturers[this.value]?true:false))});if(v_params.pmin){ $("#cunits-filter-price-min").val(v_params.pmin); $("#cunits-filter-price-min").change()}if(v_params.pmax){ $("#cunits-filter-price-max").val(v_params.pmax); $("#cunits-filter-price-max").change()}if(v_params.cpmin){ $('#cunits-filter-power_cooling-min').val(v_params.cpmin); $('#cunits-filter-power_cooling-min').change()}if(v_params.cpmax){ $('#cunits-filter-power_cooling-max').val(v_params.cpmax); $('#cunits-filter-power_cooling-max').change()}if(v_params.hpmin){ $('#cunits-filter-power_heating-min').val(v_params.hpmin); $('#cunits-filter-power_heating-min').change()}if(v_params.hpmax){ $('#cunits-filter-power_heating-max').val(v_params.hpmax); $('#cunits-filter-power_heating-max').change()}nCUNITS.filter_use()}});