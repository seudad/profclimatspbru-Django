 $(document).ready(function(){var MaxPwr=20,kSEER=0.8,CurEl=[0,6,10,16,20,25,32,40,50,63],Cabel=[0,0.75,1.5,2.5,4],kWeather=[100,80,50,30],kHrWork=[65,50,40,35],kMonth=[[40,65,100,75,25],[25,60,100,65,15],[10,55,100,58,5],[0,45,100,41,0]];function toNum(a){str=new String(a);return 0<str.indexOf(",")?(new_str=str.split(","),res_str=new_str[0]+"."+new_str[1]):a}var S=toNum($('input[name="S"]').val());var S_min=5;var S_max=2E3;var H=toNum($('input[name="H"]').val());var H_min=1.5;var H_max=5;var Q=$('input[name="Q"]').val();var G;var P;var Comp;var TV;var pwr_dif=toNum($('input[name="pwr_dif"]').val());var pwr_dif_min=0;var pwr_dif_max=20;var Kv=0;var Sw=0;var Sw_max=20;var Sw_min=0;var pwr_cond=0;var k_fix;var Q_win;var Kv_Sel;var b=4;var PwrSup;var PriceDay=toNum($('#price_day').val());var PriceDay_min=0.1;var PriceDay_max=15;var e=0;var Q_hg=0;var Q_cool=0;var Q1=0;var Qext=0;var a=3;var d=12;var e;var CurSum;var d;var k_EER=toNum($('input[name="keer"]').val());var k_EER_min=2;var k_EER_max=15; $('input[name="c1"]').click(function(){if($(this).attr("checked")){ $('select[name="Kv"]').removeAttr('disabled'); $("select[name='Kv'] option:selected").each(function(){Kv=$(this).val()}); $('#Sel_Text_vent').css({'color':'#555'})}else{ $('select[name="Kv"]').attr('disabled','disabled');Kv=0; $('#Sel_Text_vent').css({'color':'#A9A9A9'})}calcCondPower();calcAirgy()}); $('input[name="c_sw"]').click(function(){if($(this).prop('checked')==true){ $('input[name="s_win"]').removeAttr('disabled');Sw=toNum($('input[name="s_win"]').val()); $('#Sel_Text_sw').css({'color':'#555'})}else{ $('input[name="s_win"]').attr('disabled','disabled');Sw=Sw_min; $('#Sel_Text_sw').css({'color':'#A9A9A9'})}calcCondPower();calcAirgy()}); $('input[name="c_hg"]').click(function(){if($('input[name="c_hg"]').prop('checked')==true){Q_hg=0.15*Q1}else{Q_hg=0}calcCondPower();calcAirgy()}); $('input[name="S"]').click(function(){calcCondPower();calcAirgy()}); $('input[name="c_cool"]').click(function(){if($('input[name="c_cool"]').prop('checked')==false){Q_cool=0;Qrel=0;Qext=0}else{Q_cool=0.2*(Q1+Q_hg)}OutCond(Qrel);calcCondPower();calcAirgy()}); $("select").change(function(){ $("select[name='G'] option:selected").each(function(){G=$(this).val()}); $("select[name='P'] option:selected").each(function(){P=$(this).val()}); $("select[name='comp'] option:selected").each(function(){Comp=$(this).val()}); $("select[name='tv'] option:selected").each(function(){TV=$(this).val()}); $("select[name='weather'] option:selected").each(function(){e=$(this).val()});if($('input[name="c1"]').prop('checked')==true){ $("select[name='Kv'] option:selected").each(function(){Kv=$(this).val()})}else{Kv=0}calcCondPower();calcAirgy()}).change(); $(document).keyup(function(){if(parseFloat($('input[name="pwr_dif"]').val())>pwr_dif_max){pwr_dif=pwr_dif_max; $('input[name="pwr_dif"]').val(pwr_dif_max)}else if(parseFloat($('input[name="pwr_dif"]').val())<pwr_dif_min){pwr_dif=pwr_dif_min; $('input[name="pwr_dif"]').val(pwr_dif_min)}else{pwr_dif=toNum($('input[name="pwr_dif"]').val())}if($('input[name="c_sw"]').prop('checked')==true){if($('input[name="s_win"]').val()>Sw_max){}else if($('input[name="s_win"]').val()<Sw_min){Sw=Sw_min; $('input[name="s_win"]').val(Sw_min)}else{Sw=toNum($('input[name="s_win"]').val())}}else{Sw=Sw_min}if(parseFloat($('#price_day').val())>PriceDay_max){PriceDay=PriceDay_max; $('#price_day').val(PriceDay_max)}else if(parseFloat($('#price_day').val())<PriceDay_min){PriceDay=PriceDay_min; $('#price_day').val(PriceDay_min)}else{PriceDay=toNum($('#price_day').val())}if(parseFloat($('input[name="keer"]').val())>k_EER_max){k_EER=k_EER_max; $('input[name="keer"]').val(k_EER_max)}else if(parseFloat($('input[name="keer"]').val())<k_EER_min){k_EER=k_EER_min; $('input[name="keer"]').val(k_EER_min)}else{k_EER=toNum($('input[name="keer"]').val())}if($('input[name="S"]').val()>S_max){S=S_max; $('input[name="S"]').val(S_max)}else if($('input[name="S"]').val()<S_min){S=S_min; $('input[name="S"]').val(S_min)}else{S=toNum($('input[name="S"]').val())}if($('input[name="H"]').val()>H_max){H=H_max; $('input[name="H"]').val(H_max)}else if($('input[name="H"]').val()<H_min){H=H_min; $('input[name="H"]').val(H_min)}else{H=toNum($('input[name="H"]').val())}calcCondPower();calcAirgy()});function calcCondPower(){var Lv_const=0.0075;Q1=G/1E3*S*H;Q2=0.1*P;Q3=0.3*Comp+0.2*TV+0.3*pwr_dif;if($('input[name="c1"]').prop('checked')==true){Kv_Sel=Kv}else{Kv_Sel=0}if($('input[name="c_sw"]').prop('checked')==true){if($('input[name="s_win"]').val()>20){Sw=20; $('input[name="s_win"]').val('20')}else{Sw=toNum($('input[name="s_win"]').val())}}else{Sw=0}Pvent=Kv_Sel*S*H*Lv_const;if(Sw>2){if(G<32){Q_win=0.075*(Sw-2)}if(32<G&&37>G){Q_win=0.15*(Sw-2)}if(38<G){Q_win=0.25*(Sw-2)}}else{Q_win=0}Qext=Pvent+Q_win+Q_cool+Q_hg;pwr_cond_base=Q1+Q2+Q3;pwr_cond=pwr_cond_base+Qext;if(10>pwr_cond){k_round=100}else if(100>pwr_cond){k_round=10}else{k_round=1}pwr_cond=Math.round((pwr_cond_base+Qext)*k_round)/k_round;Qrel=Math.round(100*(Qext/Q1));Q=pwr_cond;calcAirgy();OutCond(Qrel)};function calcAirgy(){if(MaxPwr>pwr_cond){PwrSup=pwr_cond/k_EER; $('#Pwr_Sup').html("<b>&nbsp;"+PwrSup.toFixed(1)+" кВт");if(PwrSup<=4){Curnt=1E3*PwrSup/220;a=3;d=12; $('#Cur_Sup_Text').html("<b><nobr>Потребляемый ток (при 220В, 1 фаза):</nobr></b>")}else{Curnt=1E3*PwrSup/660;a=5;d=10; $('#Cur_Sup_Text').html("<b><nobr>Потребляемый ток (при 380В, 3 фазы):</nobr></b>")}for(var e=1.3*Curnt,b=1;b<CurEl.length;b++){if(CurEl[b-1]<e&&CurEl[b]>e){var f=CurEl[b];for(b=1;b<Cabel.length;b++){if(Cabel[b-1]*d<f&&Cabel[b]*d>f){var g=Cabel[b];b=" (автомат на "+f+"А, кабель "+a+"x"+g+"мм&sup2;)"; $('#Cur_Sup').html("<b>&nbsp;"+Curnt.toFixed(1)+" А</b>"+b)}}}}a=0;d=[]; $("select[name='weather'] option:selected").each(function(){e=$(this).val()});for(b=0;4>=b;b++){d[b]=720*(parseFloat(kSEER)*parseFloat(PwrSup))*PriceDay*parseFloat(kWeather[e])/100*parseFloat(kHrWork[e])/100*parseFloat(kMonth[e][b])/100;CurSum=d[b];a+=CurSum; $('#Mn'+(b+1)).html(10*(CurSum/10).toFixed(0))} $('#MnS').html(10*(a/10).toFixed(0)+"&nbsp;руб.")}else{ $('#Pwr_Sup').html("&nbsp;"); $('#Cur_Sup').html("&nbsp;");for(b=0;4>=b;b++){ $('#Mn'+(b+1)).html("&nbsp;")} $('#MnS').html("&nbsp;")}};function OutCond(Qrel){SText="";qq=$('#Models');if(pwr_cond<10){k_fix=2;k_fxr=1}else if(pwr_cond<100){k_fix=1;k_fxr=1}else{k_fix=0;k_fxr=0}PwrMin=(pwr_cond*0.95).toFixed(k_fxr);PwrMax=(pwr_cond*1.15).toFixed(k_fxr);qq.html(SText); $('#Power_Out').html(parseFloat(pwr_cond.toFixed(k_fix))+' кВт');if(pwr_cond<MaxPwr){ $('#Power_Out_TR').html('<b>Рекомендуемый диапазон  Q<sub>range</sub>:</b>'); $('#Power_Out_Range').html(PwrMin+' &ndash; '+PwrMax+' кВт')}else{ $('#Power_Out_TR').html('<span style="color:#FF9B00;font-size:90%;">Калькулятор предназначен для расчета <br> мощности только бытовых кондиционеров</span>'); $('#Power_Out_Range').html('&nbsp;')}if((Qrel<=1)||(pwr_cond>=MaxPwr)) $('#Q_Ext_Note').html('&nbsp;');else if(Qrel<14) $('#Q_Ext_Note').html('<b style="color:  #969696;">Мощность Q1 увеличилась на '+Qrel+'%</b>');else $('#Q_Ext_Note').html('<b style="color:  #969696;">Мощность Q1 увеличилась на '+Qrel+'%, <br>рекомендуем использовать <br> инверторный кондиционер</b>')}});