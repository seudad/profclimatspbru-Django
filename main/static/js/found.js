var nFOUND={};nFOUND.tollbar_counts_get=function(){return{show:parseInt($('#units-toolbar-count-show').text().trim(),10),all:parseInt($('#units-toolbar-count-all').text().trim(),10)}};nFOUND.tollbar_counts_set=function(p_show,p_all){ $('#units-toolbar-count-show').text(p_show.toString()); $('#units-toolbar-count-all').text(p_all.toString())};nFOUND.toolbar_show_table=function(){ $('#units-toolbar-show-table').addClass('show-sel'); $('#units-toolbar-show-tile').removeClass('show-sel')};nFOUND.toolbar_show_tile=function(){ $('#units-toolbar-show-table').removeClass('show-sel'); $('#units-toolbar-show-tile').addClass('show-sel')};nFOUND.price_init=function(){var v_min=Number($('#price-min').val()),v_max=Number($('#price-max').val()),v_step=Number($("#cunits-filter-price-min").data('step')); $("#units-filter-price-min").attr('min',v_min); $("#units-filter-price-min").attr('max',v_max); $("#units-filter-price-min").val(v_min); $("#units-filter-price-max").attr('min',v_min); $("#units-filter-price-max").attr('max',v_max); $("#units-filter-price-max").val(v_max); $("#units-filter-price-slider").slider({animate:true,values:[v_min,v_max],range:true,min:v_min,max:v_max,step:v_step,slide:function(event,ui){ $("#units-filter-price-min").val(ui.values[0]); $("#units-filter-price-max").val(ui.values[1])},change:function(event,ui){ $("#units-filter-price-min").val(ui.values[0]); $("#units-filter-price-max").val(ui.values[1])}}); $('#units-filter-price-min').change(function(e){ $('#units-filter-price-slider').slider("values",0, $(this).val())}); $('#units-filter-price-max').change(function(e){ $('#units-filter-price-slider').slider("values",1, $(this).val())})};nFOUND.price_reset=function(){var v_min=Number($('#price-min').val()),v_max=Number($('#price-max').val()); $("#units-filter-price-min").attr('min',v_min); $("#units-filter-price-min").attr('max',v_max); $("#units-filter-price-min").val(v_min); $("#units-filter-price-max").attr('min',v_min); $("#units-filter-price-max").attr('max',v_max); $("#units-filter-price-max").val(v_max); $('#cunits-filter-price-slider').slider("values",0,v_min); $('#cunits-filter-price-slider').slider("values",1,v_max)};nFOUND.filter_use=function(){const v_req={q:1,cats:[],states:[],find:nFIND._find_text.val().trim(),sort: $('#units-toolbar-sort').data('value'),psz: $('#units-toolbar-psize').data('value'),price_min: $("#units-filter-price-min").val().trim(),price_max: $("#units-filter-price-max").val().trim()}; $('input[name=units-filter-cats]:checked').each(function(){v_req.cats.push($(this).val())}); $('input[name=units-filter-states]:checked').each(function(){v_req.states.push($(this).val())});v_req.f=($('#units-toolbar-show-table').is('.show-sel')?'table':'tile');nFIND.req(v_req)}; $(document).ready(function(){nPOPUPMENU.init('#units-toolbar-sort');nPOPUPMENU.init('#units-toolbar-psize');if($('#req-format').val()==='table'){nFOUND.toolbar_show_table()}else{nFOUND.toolbar_show_tile()}nPOPUPMENU.set('#units-toolbar-sort', $('#req-sort').val());nPOPUPMENU.set('#units-toolbar-psize',Number($('#req-pgsize').val()));nPOPUPMENU.change('#units-toolbar-sort',nFOUND.filter_use);nPOPUPMENU.change('#units-toolbar-psize',nFOUND.filter_use); $('#units-toolbar-show-tile').click(function(p_event){p_event.preventDefault();nFOUND.filter_use()}); $('#units-toolbar-show-table').click(function(p_event){p_event.preventDefault();nFOUND.filter_use()});var v_vars=$.getUrlVars();v_vars.f='tile'; $('#units-toolbar-show-tile').attr('href', $.buildParams(v_vars));v_vars.f='table'; $('#units-toolbar-show-table').attr('href', $.buildParams(v_vars));v_vars=$.getUrlVars(); $('#units-toolbar-refresh').attr('href', $.buildParams(v_vars)); $('#find-text').val(decodeURI((v_vars.find?v_vars.find:''))); $('#units-toolbar-refresh').click(function(){return});nHEADER.init();nUSER.init(); $("#units").on('click','.units-item-buy',nBASKET.buy);nFIND.init();nFOUND.price_init(); $('#units-filter-use').click(nFOUND.filter_use); $('#units-filter-clear').click(function(){ $('#filter input[type=checkbox').prop('checked',false); $('#filter input[type=checkbox').prop('checked',false);nFOUND.price_reset()}); $('#units-filter-clear').click()});