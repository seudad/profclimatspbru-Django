"use strict";var nCUNITS={_dummy_:null};nCUNITS.price_min=function(){return Number($('#price-min').val())};nCUNITS.price_max=function(){return Number($('#price-max').val())};nCUNITS.service_area_min=function(){return Number($('#service_area-min').val())};nCUNITS.service_area_max=function(){return Number($('#service_area-max').val())};nCUNITS.noise_level_min=function(){return Number($('#noise_level-min').val())};nCUNITS.noise_level_max=function(){return Number($('#noise_level-max').val())};nCUNITS.power_cooling_min=function(){return Number($('#power_cooling-min').val())};nCUNITS.power_cooling_max=function(){return Number($('#power_cooling-max').val())};nCUNITS.power_heating_min=function(){return Number($('#power_heating-min').val())};nCUNITS.power_heating_max=function(){return Number($('#power_heating-max').val())};nCUNITS.req_price_min=function(){return Number($('#req_price-min').val())};nCUNITS.req_price_max=function(){return Number($('#req_price-max').val())};nCUNITS.req_service_area_min=function(){return Number($('#req_service_area-min').val())};nCUNITS.req_service_area_max=function(){return Number($('#req_service_area-max').val())};nCUNITS.req_noise_level_min=function(){return Number($('#req_noise_level-min').val())};nCUNITS.req_noise_level_max=function(){return Number($('#req_noise_level-max').val())};nCUNITS.req_power_cooling_min=function(){return Number($('#req_power_cooling-min').val())};nCUNITS.req_power_cooling_max=function(){return Number($('#req_power_cooling-max').val())};nCUNITS.req_power_heating_min=function(){return Number($('#req_power_heating-min').val())};nCUNITS.req_power_heating_max=function(){return Number($('#req_power_heating-max').val())};nCUNITS.filter_price_init=function(){let v_step=Number($("#cunits-filter-price-min").attr('step')),v_min=nCUNITS.price_min(),v_max=nCUNITS.price_max(),v_req_min=nCUNITS.req_price_min(),v_req_max=nCUNITS.req_price_max(); $("#cunits-filter-price-min").attr('min',v_min); $("#cunits-filter-price-min").attr('max',v_max); $("#cunits-filter-price-min").val(v_req_min); $("#cunits-filter-price-max").attr('min',v_min); $("#cunits-filter-price-max").attr('max',v_max); $("#cunits-filter-price-max").val(v_req_max); $("#cunits-filter-price-slider").slider({animate:true,values:[v_req_min,v_req_max],range:true,min:v_min,max:v_max,step:v_step,slide:function(event,ui){ $("#cunits-filter-price-min").val(ui.values[0]); $("#cunits-filter-price-max").val(ui.values[1])},change:function(event,ui){ $("#cunits-filter-price-min").val(ui.values[0]); $("#cunits-filter-price-max").val(ui.values[1])}}); $('#cunits-filter-price-min').change(function(e){ $('#cunits-filter-price-slider').slider("values",0, $(this).val())}); $('#cunits-filter-price-max').change(function(e){ $('#cunits-filter-price-slider').slider("values",1, $(this).val())})};nCUNITS.filter_price_reset=function(){ $("#cunits-filter-price-min").attr('min',nCUNITS.price_min()); $("#cunits-filter-price-min").attr('max',nCUNITS.price_max()); $("#cunits-filter-price-min").val(nCUNITS.price_min); $("#cunits-filter-price-max").attr('min',nCUNITS.price_min()); $("#cunits-filter-price-max").attr('max',nCUNITS.price_max()); $("#cunits-filter-price-max").val(nCUNITS.price_min()); $('#cunits-filter-price-slider').slider("values",0,nCUNITS.price_min()); $('#cunits-filter-price-slider').slider("values",1,nCUNITS.price_max())};nCUNITS.filter_service_area_init=function(){let v_step=Number($("#cunits-filter-service_area-min").attr('step')); $("#cunits-filter-service_area-min").attr('min',nCUNITS.service_area_min()); $("#cunits-filter-service_area-max").attr('max',nCUNITS.service_area_max());let v_units_filter_service_area_min=parseInt($("#cunits-filter-service_area-min").attr('min').trim(),10);let v_units_filter_service_area_max=parseInt($("#cunits-filter-service_area-max").attr('max').trim(),10); $("#cunits-filter-service_area-slider").slider({animate:true,values:[v_units_filter_service_area_min,v_units_filter_service_area_max],range:true,min:v_units_filter_service_area_min,max:v_units_filter_service_area_max,step:v_step,slide:function(event,ui){ $("#cunits-filter-service_area-min").val(ui.values[0]); $("#cunits-filter-service_area-max").val(ui.values[1])},change:function(event,ui){ $("#cunits-filter-service_area-min").val(ui.values[0]); $("#cunits-filter-service_area-max").val(ui.values[1])}}); $('#cunits-filter-service_area-min').change(function(e){ $('#cunits-filter-service_area-slider').slider("values",0, $(this).val())}); $('#cunits-filter-service_area-max').change(function(e){ $('#cunits-filter-service_area-slider').slider("values",1, $(this).val())}); $('#cunits-filter-service_area-min').change(); $('#cunits-filter-service_area-max').change()};nCUNITS.filter_service_area_reset=function(){ $("#cunits-filter-service_area-min").attr('min',nCUNITS.service_area_min()); $("#cunits-filter-service_area-max").attr('max',nCUNITS.service_area_max()); $('#cunits-filter-service_area-slider').slider("values",0,nCUNITS.service_area_min()); $('#cunits-filter-service_area-slider').slider("values",1,nCUNITS.service_area_max()); $('#cunits-filter-service_area-min').change(); $('#cunits-filter-service_area-max').change()};nCUNITS.filter_noise_level_init=function(){let v_step=Number($("#cunits-filter-noise_level-min1").attr('step')); $("#cunits-filter-noise_level-min1").attr('min',nCUNITS.noise_level_min()); $("#cunits-filter-noise_level-min1").attr('max',nCUNITS.noise_level_max()); $("#cunits-filter-noise_level-min2").attr('min',nCUNITS.noise_level_min()); $("#cunits-filter-noise_level-min2").attr('max',nCUNITS.noise_level_max()); $("#cunits-filter-noise_level-min1").val(nCUNITS.noise_level_min()); $("#cunits-filter-noise_level-min2").val(nCUNITS.noise_level_max()); $("#cunits-filter-noise_level-max1").attr('min',nCUNITS.noise_level_min()); $("#cunits-filter-noise_level-max1").attr('max',nCUNITS.noise_level_max()); $("#cunits-filter-noise_level-max2").attr('min',nCUNITS.noise_level_min()); $("#cunits-filter-noise_level-max2").attr('max',nCUNITS.noise_level_max()); $("#cunits-filter-noise_level-max1").val(nCUNITS.noise_level_min()); $("#cunits-filter-noise_level-max2").val(nCUNITS.noise_level_max());var v_units_filter_noise_level_min1=Number($("#cunits-filter-noise_level-min1").attr('min'));var v_units_filter_noise_level_min2=Number($("#cunits-filter-noise_level-min2").attr('max')); $("#cunits-filter-noise_level-min-slider").slider({animate:true,values:[v_units_filter_noise_level_min1,v_units_filter_noise_level_min2],range:true,min:v_units_filter_noise_level_min1,max:v_units_filter_noise_level_min2,step:v_step,slide:function(p_event,p_ui){ $("#cunits-filter-noise_level-min1").val(p_ui.values[0]); $("#cunits-filter-noise_level-min2").val(p_ui.values[1])},change:function(p_event,p_ui){ $("#cunits-filter-noise_level-min1").val(p_ui.values[0]); $("#cunits-filter-noise_level-min2").val(p_ui.values[1])}}); $('#cunits-filter-noise_level-min1').change(function(p_event){ $('#cunits-filter-noise_level-min-slider').slider("values",0, $(this).val())}); $('#cunits-filter-noise_level-min2').change(function(p_event){ $('#cunits-filter-noise_level-min-slider').slider("values",1, $(this).val())});let v_units_filter_noise_level_max1=Number($("#cunits-filter-noise_level-max1").attr('min'));let v_units_filter_noise_level_max2=Number($("#cunits-filter-noise_level-max2").attr('max')); $("#cunits-filter-noise_level-max-slider").slider({animate:true,values:[v_units_filter_noise_level_max1,v_units_filter_noise_level_max2],range:true,min:v_units_filter_noise_level_max1,max:v_units_filter_noise_level_max2,step:1,slide:function(p_event,p_ui){ $("#cunits-filter-noise_level-max1").val(p_ui.values[0]); $("#cunits-filter-noise_level-max2").val(p_ui.values[1])},change:function(p_event,p_ui){ $("#cunits-filter-noise_level-max1").val(p_ui.values[0]); $("#cunits-filter-noise_level-max2").val(p_ui.values[1])}}); $('#cunits-filter-noise_level-max1').change(function(p_e){ $('#cunits-filter-noise_level-max-slider').slider("values",0, $(this).val())}); $('#cunits-filter-noise_level-max2').change(function(p_e){ $('#cunits-filter-noise_level-max-slider').slider("values",1, $(this).val())}); $('#cunits-filter-noise_level-min1').change(); $('#cunits-filter-noise_level-min2').change(); $('#cunits-filter-noise_level-max1').change(); $('#cunits-filter-noise_level-max2').change()};nCUNITS.filter_noise_level_reset=function(){ $("#cunits-filter-noise_level-min1").attr('min',nCUNITS.noise_level_min()); $("#cunits-filter-noise_level-min1").attr('max',nCUNITS.noise_level_max()); $("#cunits-filter-noise_level-min2").attr('min',nCUNITS.noise_level_min()); $("#cunits-filter-noise_level-min2").attr('max',nCUNITS.noise_level_max()); $("#cunits-filter-noise_level-min1").val(nCUNITS.noise_level_min()); $("#cunits-filter-noise_level-min2").val(nCUNITS.noise_level_max()); $("#cunits-filter-noise_level-max1").attr('min',nCUNITS.noise_level_min()); $("#cunits-filter-noise_level-max1").attr('max',nCUNITS.noise_level_max()); $("#cunits-filter-noise_level-max2").attr('min',nCUNITS.noise_level_min()); $("#cunits-filter-noise_level-max2").attr('max',nCUNITS.noise_level_max()); $("#cunits-filter-noise_level-max1").val(nCUNITS.noise_level_min()); $("#cunits-filter-noise_level-max2").val(nCUNITS.noise_level_max()); $('#cunits-filter-noise_level-min-slider').slider("values",0,nCUNITS.noise_level_min()); $('#cunits-filter-noise_level-min-slider').slider("values",1,nCUNITS.noise_level_max()); $('#cunits-filter-noise_level-max-slider').slider("values",0,nCUNITS.noise_level_min()); $('#cunits-filter-noise_level-max-slider').slider("values",1,nCUNITS.noise_level_max()); $('#cunits-filter-noise_level-min1').change(); $('#cunits-filter-noise_level-min2').change(); $('#cunits-filter-noise_level-max1').change(); $('#cunits-filter-noise_level-max2').change()};nCUNITS.filter_power_cooling_init=function(){let v_step=Number($("#cunits-filter-power_cooling-min").attr('step')); $("#cunits-filter-power_cooling-min").attr('min',nCUNITS.power_cooling_min()); $("#cunits-filter-power_cooling-min").attr('max',nCUNITS.power_cooling_max()); $("#cunits-filter-power_cooling-min").val(nCUNITS.req_power_cooling_min()); $("#cunits-filter-power_cooling-max").attr('min',nCUNITS.power_cooling_min()); $("#cunits-filter-power_cooling-max").attr('max',nCUNITS.power_cooling_max()); $("#cunits-filter-power_cooling-max").val(nCUNITS.req_power_cooling_max()); $("#cunits-filter-power_cooling-slider").slider({animate:true,values:[nCUNITS.req_power_cooling_min(),nCUNITS.req_power_cooling_max()],range:true,min:nCUNITS.power_cooling_min(),max:nCUNITS.power_cooling_max(),step:v_step,slide:function(event,ui){ $("#cunits-filter-power_cooling-min").val(ui.values[0]); $("#cunits-filter-power_cooling-max").val(ui.values[1])},change:function(event,ui){ $("#cunits-filter-power_cooling-min").val(ui.values[0]); $("#cunits-filter-power_cooling-max").val(ui.values[1])}}); $('#cunits-filter-power_cooling-min').change(function(e){ $('#cunits-filter-power_cooling-slider').slider("values",0, $(this).val())}); $('#cunits-filter-power_cooling-max').change(function(e){ $('#cunits-filter-power_cooling-slider').slider("values",1, $(this).val())})};nCUNITS.filter_power_cooling_reset=function(){ $("#cunits-filter-power_cooling-min").attr('min',nCUNITS.power_cooling_min()); $("#cunits-filter-power_cooling-min").attr('max',nCUNITS.power_cooling_max()); $("#cunits-filter-power_cooling-min").val(nCUNITS.power_cooling_min()); $("#cunits-filter-power_cooling-max").attr('min',nCUNITS.power_cooling_min()); $("#cunits-filter-power_cooling-max").attr('max',nCUNITS.power_cooling_max()); $("#cunits-filter-power_cooling-max").val(nCUNITS.power_cooling_max()); $('#cunits-filter-power_cooling-slider').slider("values",0,nCUNITS.power_cooling_min()); $('#cunits-filter-power_cooling-slider').slider("values",1,nCUNITS.power_cooling_max())};nCUNITS.filter_power_heating_init=function(){let v_step=Number($("#cunits-filter-power_heating-min").attr('step')); $("#cunits-filter-power_heating-min").attr('min',nCUNITS.power_heating_min()); $("#cunits-filter-power_heating-min").attr('max',nCUNITS.power_heating_max()); $("#cunits-filter-power_heating-min").val(nCUNITS.req_power_heating_min()); $("#cunits-filter-power_heating-max").attr('min',nCUNITS.power_heating_min()); $("#cunits-filter-power_heating-max").attr('max',nCUNITS.power_heating_max()); $("#cunits-filter-power_heating-max").val(nCUNITS.req_power_heating_max()); $("#cunits-filter-power_heating-slider").slider({animate:true,values:[nCUNITS.req_power_heating_min(),nCUNITS.req_power_heating_max()],range:true,min:nCUNITS.power_heating_min(),max:nCUNITS.power_heating_max(),step:v_step,slide:function(event,ui){ $("#cunits-filter-power_heating-min").val(ui.values[0]); $("#cunits-filter-power_heating-max").val(ui.values[1])},change:function(event,ui){ $("#cunits-filter-power_heating-min").val(ui.values[0]); $("#cunits-filter-power_heating-max").val(ui.values[1])}}); $('#cunits-filter-power_heating-min').change(function(e){ $('#cunits-filter-power_heating-slider').slider("values",0, $(this).val())}); $('#cunits-filter-power_heating-max').change(function(e){ $('#cunits-filter-power_heating-slider').slider("values",1, $(this).val())})};nCUNITS.filter_power_heating_reset=function(){ $("#cunits-filter-power_heating-min").attr('min',nCUNITS.power_heating_min()); $("#cunits-filter-power_heating-min").attr('max',nCUNITS.power_heating_max()); $("#cunits-filter-power_heating-min").val(nCUNITS.power_heating_min()); $("#cunits-filter-power_heating-max").attr('min',nCUNITS.power_heating_min()); $("#cunits-filter-power_heating-max").attr('max',nCUNITS.power_heating_max()); $("#cunits-filter-power_heating-max").val(nCUNITS.power_heating_max()); $('#cunits-filter-power_heating-slider').slider("values",0,nCUNITS.power_heating_min()); $('#cunits-filter-power_heating-slider').slider("values",1,nCUNITS.power_heating_max())};nCUNITS.filter_inv_reset=function(){ $("#cunits-filter-inv1").prop('checked',false); $("#cunits-filter-inv2").prop('checked',false)};nCUNITS.filter_hpump_reset=function(){ $("#cunits-filter-hpump0").prop('checked',true)};nCUNITS.filter_work_mode_reset=function(){ $("#cunits-filter-work_mode1").prop('checked',false); $("#cunits-filter-work_mode2").prop('checked',false)};nCUNITS.filter_class_reset=function(){ $('#cunits-filter-class input[type=checkbox]').prop('checked',false)};nCUNITS.filter_xopt_reset=function(){ $('#cunits-filter-xopt input[type=checkbox]').prop('checked',false)};nCUNITS.filter_wifi_reset=function(){ $('#cunits-filter-wifi input[type=checkbox]').prop('checked',false)};nCUNITS.filter_init=function(){nCUNITS.filter_price_init();nCUNITS.filter_power_cooling_init();nCUNITS.filter_power_heating_init(); $('#cunits-colors div.unit-color[data-color="'+ $('#req-color').val()+'"]').addClass('unit-color-selected')};nCUNITS.filter_reset=function(){nCUNITS.filter_price_reset();nCUNITS.filter_power_cooling_reset();nCUNITS.filter_power_heating_reset();nCUNITS.filter_inv_reset();nCUNITS.filter_hpump_reset();nCUNITS.filter_xopt_reset();nCUNITS.filter_work_mode_reset();nCUNITS.filter_class_reset();nCUNITS.filter_wifi_reset(); $('#cunits-filter-manufacturer input[type=checkbox]').each(function(){ $(this).prop('checked',false)}); $('#cunits-filter-btype input[type=checkbox]').each(function(){ $(this).prop('checked',false)}); $('#cunits-filter-indoor_units_number input[type=checkbox]').each(function(){ $(this).prop('checked',false)})};nCUNITS.get_list_manufactures_on=function(){let v_manufactures={}; $('#cunits-filter-manufacturer input[name=filter-manufacturer]:checked').each(function(){v_manufactures[this.value]=true});return v_manufactures};nCUNITS.get_list_btypes_on=function(){let v_btypes={}; $('#cunits-filter-btype input[name=filter-btype]:checked').each(function(){v_btypes[this.value]=true});return v_btypes};nCUNITS.get_array_manufactures_on=function(){let v_manufactures=[]; $('#cunits-filter-manufacturer input[name=filter-manufacturer]:checked').each(function(){v_manufactures.push(this.value)});return v_manufactures};nCUNITS.get_array_btypes_on=function(){let v_btypes=[]; $('#cunits-filter-btype input[name=filter-btype]:checked').each(function(){v_btypes.push(this.value)});return v_btypes};nCUNITS.get_indoor_units_number=function(){let v_indoor_units_number=[]; $('#cunits-filter-indoor_units_number input:checked').each(function(){v_indoor_units_number.push(this.value)});return v_indoor_units_number};nCUNITS.build_param=function(){let v_manufacturers=nCUNITS.get_array_manufactures_on();for(let v_i=0;v_i<v_manufacturers.length;v_i++){v_manufacturers[v_i]=encodeURIComponent(v_manufacturers[v_i])}let v_btypes=nCUNITS.get_array_btypes_on();let v_vars=$.getUrlVars();v_vars.m=v_manufacturers.join(',');v_vars.bt=v_btypes.join(',');v_vars.sort=$('#units-toolbar-sort').data('value');v_vars.psz=$('#units-toolbar-psize').data('value');v_vars.price_min=$("#cunits-filter-price-min").val();v_vars.price_max=$("#cunits-filter-price-max").val();v_vars.pcmin=Number($('#cunits-filter-power_cooling-min').val().trim())*1000;v_vars.pcmax=Number($('#cunits-filter-power_cooling-max').val().trim())*1000;v_vars.phmin=Number($('#cunits-filter-power_heating-min').val().trim())*1000;v_vars.phmax=Number($('#cunits-filter-power_heating-max').val().trim())*1000;v_vars.cold_only=0;v_vars.cold_and_heat=0;if($('#cunits-filter-work_mode1').is(':checked')){v_vars.cold_only=1}if($('#cunits-filter-work_mode2').is(':checked')){v_vars.cold_and_heat=1}if(v_vars.cold_only===0&&v_vars.cold_and_heat===0){v_vars.cold_only=1;v_vars.cold_and_heat=1}v_vars.inv=0;if($('#cunits-filter-inv1').is(':checked')){v_vars.inv+=1}if($('#cunits-filter-inv2').is(':checked')){v_vars.inv+=2}if(v_vars.inv===0){v_vars.inv=3} $('#cunits-filter-class input[type=checkbox]').each(function(){if($(this).is(':checked')){v_vars[$(this).val()]=1}else{delete v_vars[$(this).val()]}});v_vars.wifi=[]; $('#cunits-filter-wifi input[type=checkbox]').each(function(){if($(this).is(':checked')){v_vars.wifi.push($(this).val())}});v_vars.wifi=v_vars.wifi.join(',');let v_hpump=$('#cunits-filter-hpump [name=filter-hpump]:checked');if(v_hpump.length){v_vars.hpump=v_hpump.val()}else{delete v_vars.hpump} $('#cunits-filter-xopt input[type=checkbox]').each(function(){console.log('xopt:', $(this).val(), $(this).is(':checked'));v_vars[$(this).val()]=($(this).is(':checked')?1:0)});let v_indoor_units_number=nCUNITS.get_indoor_units_number();if(v_indoor_units_number.length){v_vars.uin=v_indoor_units_number.join(",")}else{delete v_vars.uin}let v_colors=[]; $('#cunits-filter-colors input[type=checkbox]:checked').each(function(){v_colors.push(this.value)});if(v_colors.length){v_vars.color=v_colors.join(','); $('#req-color').val(v_vars.color)}else{delete v_vars.color; $('#req-color').val('')}return v_vars};nCUNITS.filter_use=function(){ $('#_running').show();let v_url=window.location.origin+window.location.pathname+ $.buildParams(nCUNITS.build_param());window.history.pushState(null,null,v_url); $.ajax({url:v_url+'&q=1',async:true,dataType:'html',error:function(p_XHR,p_textStatus,p_errorThrown){ $('#_running').hide()},success:function(p_data){ $('#cunits-list').html(p_data);nCUNITS.get_more_set(); $('#_running').hide()}})};nCUNITS.get_more=function(){let v_params=nCUNITS.build_param();v_params.p=Number($('#req-pgno').val())+1;let v_pg_count=Number($('#pg_count').val());if(v_params.p>v_pg_count){return}if(Number($('#units-toolbar-psize').data('value'))===999999){return} $('#_running').show();if(v_params.p===v_pg_count){ $('#pg-more-get').hide()}let v_url=window.location.origin+window.location.pathname+ $.buildParams(v_params);window.history.pushState(null,null,v_url); $.ajax({url:v_url+'&q=2',async:true,dataType:'json',error:function(p_XHR,p_textStatus,p_errorThrown){ $('#_running').hide()},success:function(p_data){for(let v_i=0;v_i<p_data.params.length;v_i++){ $('#'+p_data.params[v_i].nm).val(p_data.params[v_i].val)} $('#cunits-list-items').append(p_data.html); $('#pages-index').html(p_data.pg.refs); $('#_running').hide()}})};nCUNITS.tollbar_counts_get=function(){return{show:parseInt($('#units-toolbar-count-show').text().trim(),10),all:parseInt($('#units-toolbar-count-all').text().trim(),10)}};nCUNITS.tollbar_counts_set=function(p_show,p_all){ $('#units-toolbar-count-show').text(p_show.toString()); $('#units-toolbar-count-all').text(p_all.toString())};nCUNITS.toolbar_show_table=function(){ $('#units-toolbar-show-table').removeClass('unit-list-button-off'); $('#units-toolbar-show-tile').addClass('unit-list-button-off')};nCUNITS.toolbar_show_tile=function(){ $('#units-toolbar-show-table').addClass('unit-list-button-off'); $('#units-toolbar-show-tile').removeClass('unit-list-button-off')};nCUNITS.toolbar_filter_switch=function(){if($('#cunits-filter').is(':visible')){ $('#units-filter-hide').css('display','inline-block'); $('#units-filter-show').css('display','none')}else{console.log('nCUNITS.toolbar_filter_switch.30'); $('#units-filter-hide').css('display','none'); $('#units-filter-show').css('display','inline-block')} $('#units-filter-hide').click(function(){ $('#cunits-filter').hide(); $('#units-filter-hide').css('display','none'); $('#units-filter-show').css('display','inline-block')}); $('#units-filter-show').click(function(){ $('#cunits-filter').show(); $('#units-filter-hide').css('display','inline-block'); $('#units-filter-show').css('display','none')})};nCUNITS.get_more_set=function(){if(Number($('#req-pgno').val())>=Number($('#pg_count').val())){ $('#pg-more-get').hide()}else{ $('#pg-more-get').show(); $('#pg-more-get').click(nCUNITS.get_more)}}; $(document).ready(function(){nPOPUPMENU.init('#units-toolbar-sort');nPOPUPMENU.init('#units-toolbar-psize');nCUNITS.toolbar_filter_switch();if($('#req-format').val()==='table'){nCUNITS.toolbar_show_table()}else{nCUNITS.toolbar_show_tile()}nPOPUPMENU.set('#units-toolbar-sort', $('#req-sort').val());nPOPUPMENU.set('#units-toolbar-psize',Number($('#req-pgsize').val()));nPOPUPMENU.change('#units-toolbar-sort',nCUNITS.filter_use);nPOPUPMENU.change('#units-toolbar-psize',nCUNITS.filter_use); $('#units-toolbar-show-tile').click(function(p_event){p_event.preventDefault();let v_args=$.getUrlVars();v_args.f='tile';let v_params=$.buildParams(v_args);let v_url=window.location.origin+window.location.pathname;window.location.href=v_url+v_params}); $('#units-toolbar-show-table').click(function(p_event){p_event.preventDefault();let v_args=$.getUrlVars();v_args.f='table';let v_params=$.buildParams(v_args);let v_url=window.location.origin+window.location.pathname;window.location.href=v_url+v_params}); $("#cunits-list").on('click','.units-item-buy',nBASKET.buy); $('#cunits-filter-manufacturer').on('change','input[type=checkbox]',function(){nCUNITS.filter_use()}); $('#cunits-filter-work_mode').on('change','input[type=checkbox]',function(){nCUNITS.filter_use()}); $('#cunits-filter-btype').on('change','input[type=checkbox]',function(){nCUNITS.filter_use()}); $('#cunits-filter-inv').on('change','input[type=checkbox]',function(){nCUNITS.filter_use()}); $('#cunits-filter-class').on('change','input[type=checkbox]',function(){nCUNITS.filter_use()}); $('#cunits-filter-wifi').on('change','input[type=checkbox]',function(){nCUNITS.filter_use()}); $('#cunits-filter-hpump').on('change','input[type=radio]',function(){nCUNITS.filter_use()}); $('#cunits-filter-xopt').on('change','input[type=checkbox]',function(){nCUNITS.filter_use()}); $('#cunits-filter-work_mode').on('change','input[type=checkbox]',function(){nCUNITS.filter_use()}); $('#cunits-filter-manufacturer-pop').click(function(){let v_items=$('#cunits-filter-manufacturer label');for(let v_i=0;v_i<v_items.length;v_i++){if($(v_items[v_i]).data('pop')===0){ $(v_items[v_i]).hide()}} $('#cunits-filter-manufacturer-all').removeClass('filter-box-bottom-press'); $('#cunits-filter-manufacturer-pop').addClass('filter-box-bottom-press')}); $('#cunits-filter-manufacturer-all').click(function(){let v_items=$('#cunits-filter-manufacturer label');for(let v_i=0;v_i<v_items.length;v_i++){if($(v_items[v_i]).data('pop')===0){ $(v_items[v_i]).show()}} $('#cunits-filter-manufacturer-pop').removeClass('filter-box-bottom-press'); $('#cunits-filter-manufacturer-all').addClass('filter-box-bottom-press')}); $('#cunits-refs-manufacturer-pop').click(function(){let v_items=$('#cunits-refs-manufacturer a');for(let v_i=0;v_i<v_items.length;v_i++){if($(v_items[v_i]).data('pop')===0){ $(v_items[v_i]).hide()}} $('#cunits-refs-manufacturer-all').removeClass('filter-box-bottom-press'); $('#cunits-refs-manufacturer-pop').addClass('filter-box-bottom-press')}); $('#cunits-refs-manufacturer-all').click(function(){var v_items=$('#cunits-refs-manufacturer a');for(var v_i=0;v_i<v_items.length;v_i++){if($(v_items[v_i]).data('pop')===0){ $(v_items[v_i]).show()}} $('#cunits-refs-manufacturer-pop').removeClass('filter-box-bottom-press'); $('#cunits-refs-manufacturer-all').addClass('filter-box-bottom-press')}); $('#cunits-filter-colors').on('change','input[type=checkbox]',function(){nCUNITS.filter_use()});nCUNITS.filter_init(); $('#cunits-filter-use').click(nCUNITS.filter_use); $('#cunits-filter-clear').click(function(){nCUNITS.filter_reset();nCUNITS.filter_use()});nUSER.init();nSHAVE.init();nFIND.init();nHEADER.init();let v_params=$.getUrlVars();let v_vars=$.getUrlVars();v_vars.f='tile'; $('#units-toolbar-show-tile').attr('href', $.buildParams(v_vars));v_vars.f='table'; $('#units-toolbar-show-table').attr('href', $.buildParams(v_vars));v_vars=$.getUrlVars(); $('#units-toolbar-refresh').attr('href', $.buildParams(v_vars)); $('#units-toolbar-refresh').click(function(){nCUNITS.filter_use()});if(v_params.inv==='1'){ $('#cunits-filter-inv1').prop('checked',true); $('#cunits-filter-inv2').prop('checked',false)}else if(v_params.inv==='2'){ $('#cunits-filter-inv1').prop('checked',false); $('#cunits-filter-inv2').prop('checked',true)}else{ $('#cunits-filter-inv1').prop('checked',false); $('#cunits-filter-inv2').prop('checked',false)} $('#cunits-filter-hpump [value='+(v_params.hpump?v_params.hpump:'0')+']').prop('checked',true);nCUNITS.get_more_set();if(0&&v_params.m){let v_m=v_params.m.split(',');let v_manufacturers={};for(let v_i=0;v_i<v_m.length;v_i++){v_manufacturers[unescape(v_m[v_i])]=true} $('#cunits-filter-manufacturer input[name=filter-manufacturer]').each(function(){ $(this).prop('checked',(v_manufacturers[this.value]?true:false))});if(v_params.pmin){ $("#cunits-filter-price-min").val(v_params.pmin); $("#cunits-filter-price-min").change()}if(v_params.pmax){ $("#cunits-filter-price-max").val(v_params.pmax); $("#cunits-filter-price-max").change()}if(v_params.cpmin){ $('#cunits-filter-power_cooling-min').val(v_params.cpmin); $('#cunits-filter-power_cooling-min').change()}if(v_params.cpmax){ $('#cunits-filter-power_cooling-max').val(v_params.cpmax); $('#cunits-filter-power_cooling-max').change()}if(v_params.hpmin){ $('#cunits-filter-power_heating-min').val(v_params.hpmin); $('#cunits-filter-power_heating-min').change()}if(v_params.hpmax){ $('#cunits-filter-power_heating-max').val(v_params.hpmax); $('#cunits-filter-power_heating-max').change()}nCUNITS.filter_use()}});