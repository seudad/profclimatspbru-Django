var nHUNITS={id:'nHUNITS',manufacturers:[],utypes:[],_loaded:false,units_show_format:'tile',state:{size:0,mtime:0},order:[],list:{},sort:{attr:'M+'},incl_manufacturers:null,find:{set:function(){},test:function(){return false},ext:false,text:'',req:[]},_dummy_:null};nHUNITS.show_sizes=function(p_sizes){if(p_sizes.width===null){return''}return p_sizes.width+'×'+p_sizes.height+'×'+p_sizes.depth};nHUNITS.power_max=function(p_power){return p_power.max||p_power.rated};nHUNITS.load_manufacturers=function(p_callback){nDATA.load('hmanufacturers',function(p_res){nHUNITS.manufacturers=p_res.data;nHUNITS.manufacturers=nHUNITS.manufacturers.sort(function(a,b){if(a.title<b.title){return-1}if(a.title>b.title){return 1}return 0});if(typeof(p_callback)==='function'){p_callback()}})};nHUNITS.load_utypes=function(p_callback){nDATA.load('hutypes',function(p_res){nHUNITS.utypes=p_res.data.sort();if(typeof(p_callback)==='function'){p_callback()}})};nHUNITS.load_units=function(p_callback){nDATA.load('hunits',function(p_res){nHUNITS.state=p_res.state;nHUNITS.list=p_res.data;nHUNITS.order=[];nHUNITS.list2order();if(typeof(p_callback)==='function'){p_callback(p_res)}})};nHUNITS.get_unit=function(p_manufacturer,p_utype,p_model){if(typeof(nHUNITS.list[p_manufacturer])==='undefined'){return undefined}else if(typeof(nHUNITS.list[p_manufacturer][p_utype])==='undefined'){return undefined}else if(typeof(nHUNITS.list[p_manufacturer][p_utype][p_model])==='undefined'){return undefined}return nHUNITS.list[p_manufacturer][p_utype][p_model]};nHUNITS.list2order=function(){nHUNITS.price_min=9999999;nHUNITS.price_max=0;nHUNITS.service_area_min=500;nHUNITS.service_area_max=0;nHUNITS.noise_level_min1=0;nHUNITS.noise_level_min2=1000;nHUNITS.noise_level_max1=0;nHUNITS.noise_level_max2=1000;nHUNITS.power_cooling_min=999999;nHUNITS.power_cooling_max=0;nHUNITS.power_heating_min=999999;nHUNITS.power_heating_max=0;for(var v_manufacturer in nHUNITS.list){for(var v_utype in nHUNITS.list[v_manufacturer]){for(var v_model in nHUNITS.list[v_manufacturer][v_utype]){nHUNITS.order.push({manufacturer:v_manufacturer,utype:v_unit,model:v_model});var v_unit=nHUNITS.list[v_manufacturer][v_utype][v_model];v_unit.price1=v_unit.price1*1;v_unit.price2=v_unit.price2*1;if(nHUNITS.price_min>nUNITS.get_price(v_unit)){nHUNITS.price_min=nUNITS.get_price(v_unit)}if(nHUNITS.price_max<nUNITS.get_price(v_unit)){nHUNITS.price_max=nUNITS.get_price(v_unit)}v_unit.power.heat.rated=v_unit.power.heat.rated*1;if(nHUNITS.power_heating_min>nHUNITS.power_max(v_unit.power.heat)){nHUNITS.power_heating_min=nHUNITS.power_max(v_unit.power.heat)}if(nHUNITS.power_heating_max<nHUNITS.power_max(v_unit.power.heat)){nHUNITS.power_heating_max=nHUNITS.power_max(v_unit.power.heat)}}}}};nHUNITS.manufacturers_sort=function(a,b){if(a.title.toUpperCase()<b.title.toUpperCase()){return-1}if(a.title.toUpperCase()>b.title.toUpperCase()){return 1}return 0};nHUNITS.load=function(p_callback){nDATA.load('cfg,hmanufacturers,hutypes,hunits,hfuncs,hfilters,hopts,helements,apparea,hshape,hctrl,helink',function(p_res){nSITE.list=p_res.data.cfg.data;nHUNITS.manufacturers=p_res.data.hmanufacturers.data;nHUNITS.manufacturers=nHUNITS.manufacturers.sort(nHUNITS.manufacturers_sort);nHUNITS.utypes=p_res.data.hutypes.data.sort();nHUNITS.state=p_res.data.hunits.state;nHUNITS.list=p_res.data.hunits.data;nHUNITS.order=[];nHUNITS.list2order();nHUNITS.hfuncs=p_res.data.hfuncs.data;nHUNITS.hfilters=p_res.data.hfilters.data;nHUNITS.helements=p_res.data.helements.data;nHUNITS.hopts=p_res.data.hopts.data;nHUNITS.apparea=p_res.data.apparea.data;nHUNITS.hshape=p_res.data.hshape.data;nHUNITS.hctrl=p_res.data.hctrl.data;nHUNITS.helink=p_res.data.helink.data;if(typeof(p_callback)==='function'){p_callback()}})};nHUNITS.sort_units=function(p_list){if(nHUNITS.sort.attr==='M+'){return p_list.sort(function(a,b){var v_a=nHUNITS.list[a.manufacturer][a.utype][a.model];var v_b=nHUNITS.list[b.manufacturer][b.utype][b.model];v_a=a.manufacturer.rpad(' ',80)+a.model;v_b=b.manufacturer.rpad(' ',80)+b.model;if(v_a<v_b){return-1}if(v_a>v_b){return 1}return 0})}if(nHUNITS.sort.attr==='P+'){return p_list.sort(function(a,b){var v_a=nHUNITS.list[a.manufacturer][a.utype][a.model];var v_b=nHUNITS.list[b.manufacturer][b.utype][b.model];if(nUNITS.get_price(v_a)<nUNITS.get_price(v_b)){return-1}if(nUNITS.get_price(v_a)>nUNITS.get_price(v_b)){return 1}return 0})}if(nHUNITS.sort.attr==='P-'){return p_list.sort(function(a,b){var v_a=nHUNITS.list[a.manufacturer][a.utype][a.model];var v_b=nHUNITS.list[b.manufacturer][b.utype][b.model];if(nUNITS.get_price(v_a)>nUNITS.get_price(v_b)){return-1}if(nUNITS.get_price(v_a)<nUNITS.get_price(v_b)){return 1}return 0})}return p_list};nHUNITS.get_unit=function(p_manufacturer,p_utype,p_model){if(nHUNITS.list[p_manufacturer]===undefined){return undefined}if(nHUNITS.list[p_manufacturer][p_utype]===undefined){return undefined}return nHUNITS.list[p_manufacturer][p_utype][p_model]};nHUNITS.get_units=function(p_callback){var v_manufacturers=nHUNITS.get_manufacturer_filter();var v_units=[];for(var v_i=0;v_i<v_manufacturers.length;v_i++){var v_manufacturer=v_manufacturers[v_i];var v_utypes=nHUNITS.get_utypes_filter(v_manufacturer);for(var v_k2=0;v_k2<v_utypes.length;v_k2++){var v_utype=v_utypes[v_k2];var v_models=nHUNITS.get_models_filter(v_manufacturer,v_utype);for(var v_k4=0;v_k4<v_models.length;v_k4++){var v_model=v_models[v_k4];v_units.push({manufacturer:v_manufacturer,utype:v_utype,model:v_model})}}}v_units=nHUNITS.sort_units(v_units);for(var v_i=0;v_i<v_units.length;v_i++){p_callback(v_units[v_i].manufacturer,v_units[v_i].utype,v_units[v_i].model)}};nHUNITS.get_manufacturers=function(){var v_manufacturers=[];for(var v_manufacturer in nHUNITS.list){v_manufacturers.push(v_manufacturer)}return v_manufacturers.sort()};nHUNITS.get_utypes=function(p_manufacturer){var v_types=[];for(var v_k in nHUNITS.list[p_manufacturer]){v_types.push(v_k)}return v_types.sort()};nHUNITS.get_models=function(p_manufacturer,p_utype,p_btype){var v_models=[];for(var v_model in nHUNITS.list[p_manufacturer][p_utype]){v_models.push({id:v_model,ref:nHUNITS.list[p_manufacturer][p_utype][v_model]})}return v_models.sort(function(a,b){if(a.id===b.id)return 0;if(a.id>b.id)return 1;return-1})};nHUNITS.hide=function(){ $('#hunits').hide()};nHUNITS.show=function(){ $('#check-tip').hide();if(nHUNITS._loaded){ $('#hunits').show()}else{nHUNITS.refresh_units(function(){ $('#hunits').show()})}};nHUNITS.init=function(){};