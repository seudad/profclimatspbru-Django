"use strict";var nFIND={};nFIND.clear=function(){nFIND._find_text.val('')};nFIND.go=function(){nFIND.req({find:nFIND._find_text.val().trim(),q:1})};nFIND.req=function(p_req){if(!p_req){return}if(!p_req.find){return}if(!/^\/found\/?$/.test(window.location.pathname)){window.location.href='/found/?find='+p_req.find;return} $('#_running').show();var v_url=window.location.origin+window.location.pathname+'?find='+p_req.find;window.history.pushState(null,null,v_url); $.ajax({type:"POST",url:'/found',data:p_req,dataType:'html',async:true,error:function(p_XHR,p_textStatus,p_errorThrown){console.warn('nFIND.req: error',p_XHR,p_textStatus,p_errorThrown); $('#_running').hide()},success:function(p_data){ $('#units').html(p_data); $('#_running').hide()}})};nFIND.init=function(){nFIND._find_text=$('#find-text'); $('#find-go-clear').click(function(){ $('#find-text').val('')}); $('#find-go').click(nFIND.go)};