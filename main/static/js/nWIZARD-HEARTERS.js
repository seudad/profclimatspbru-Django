"use strict";if('nWIZARD'in window){}else{window.nWIZARD={}}nWIZARD.heat={};nWIZARD.heat={K:{1:{min:3.0,max:4.0},2:{min:2.0,max:2.9},3:{min:1.0,max:1.9},4:{min:0.6,max:0.9}}};nWIZARD.heat.init=function(){var v_wizard_price_min=Number($("#wizard-heaters-price-min").attr('min').trim());var v_wizard_price_max=Number($("#wizard-heaters-price-max").attr('max').trim());var v_wizard_price_cmin=Number($("#wizard-heaters-price-min").val().trim());var v_wizard_price_cmax=Number($("#wizard-heaters-price-max").val().trim()); $("#wizard-heaters-price-slider").slider({animate:true,values:[v_wizard_price_cmin,v_wizard_price_cmax],range:true,min:v_wizard_price_min,max:v_wizard_price_max,step:1000,slide:function(p_event,p_ui){ $("#wizard-heaters-price-min").val(p_ui.values[0]); $("#wizard-heaters-price-max").val(p_ui.values[1])},change:function(p_event,p_ui){ $("#wizard-heaters-price-min").val(p_ui.values[0]); $("#wizard-heaters-price-max").val(p_ui.values[1])}}); $('#wizard-heaters-price-min').change(function(p_event){ $('#wizard-heaters-price-slider').slider("values",0, $(this).val())}); $('#wizard-price-max').change(function(p_event){ $('#wizard-heaters-price-slider').slider("values",1, $(this).val())}); $('#wizard-heaters-price-min').trigger('change'); $('#wizard-heaters-price-max').trigger('change')};nWIZARD.number=function(p_str,p_error){var v_val=p_str.replace(',','.');if(/^-?\d+(\.\d*)?$/.test(v_val)){return Number(v_val)}if(typeof p_error==='function'){return p_error()}return Number.NaN};nWIZARD.get_number=function(p_ref,p_error){var v_str=$(p_ref).val().trim();var v_val=v_str.replace(',','.');if(/^\+\d+(\.\d*)?$/.test(v_val)){ $(p_ref).removeClass('error-param');return Number(v_str.substr(1))}else if(/^-?\d+(\.\d*)?$/.test(v_val)){ $(p_ref).removeClass('error-param');return Number(v_val)} $(p_ref).addClass('error-param');if(typeof p_error==='function'){return p_error()}return Number.NaN};nWIZARD.get_cardinal=function(p_ref,p_error){var v_str=$(p_ref).val().trim();var v_val=v_str.replace(',','.');if(/^\d+(\.\d*)?$/.test(v_val)){v_val=Number(v_val);if(v_val>0){ $(p_ref).removeClass('error-param');return v_val}}console.log('nWIZARD.get_cardinal: ERROR:',p_ref,v_str); $(p_ref).addClass('error-param');if(typeof p_error==='function'){return p_error()}return Number.NaN};nWIZARD.check_number=function(p_ref,p_error){var v_str=$(p_ref).val().trim();var v_val=v_str.replace(',','.');if(/^-?\d+(\.\d*)?$/.test(v_val)){ $(p_ref).removeClass('error-param');return} $(p_ref).addClass('error-param');if(typeof p_error==='function'){p_error()}return};nWIZARD.f1round=function(p_val){return Math.round(p_val*10)/10};nWIZARD.kVt2kklh=function(p_kVt){return p_kVt*860};nWIZARD.kklh2kVt=function(p_kklh){return p_kklh/860};nWIZARD.kklh2BTE=function(p_kklh){return p_kklh*3.97};nWIZARD.kVt2BTE=function(p_kVt){return p_kVt*3412};nWIZARD.BTE2kklh=function(p_BTE){return p_BTE*0.252};nWIZARD.heat.calc=function(){var v_dom_width_int=$('#wizard-heaters-width-int');var v_dom_height_int=$('#wizard-heaters-height-int');var v_dom_length_int=$('#wizard-heaters-length-int');var v_dom_V_int=$('#wizard-heaters-V-int');var v_V_errors=0;var v_width_int=nWIZARD.get_cardinal(v_dom_width_int,function(){v_V_errors++});var v_height_int=nWIZARD.get_cardinal(v_dom_height_int,function(){v_V_errors++});var v_length_int=nWIZARD.get_cardinal(v_dom_length_int,function(){v_V_errors++});var v_V_int=v_width_int*v_height_int*v_length_int;v_dom_V_int.removeClass('error-param');if(v_V_errors){v_dom_V_int.text('??.?').addClass('error-param')}else{v_dom_V_int.text(v_V_int)}var v_dom_temp_ext_min=$("#wizard-heaters-temp-ext-min");var v_dom_temp_int_min=$("#wizard-heaters-temp-int-min");var v_dom_temp_diff=$("#wizard-heaters-temp-diff");var v_temp_errors=0;var v_temp_ext_min=nWIZARD.get_number(v_dom_temp_ext_min,function(){v_temp_errors++});var v_temp_int_min=nWIZARD.get_number(v_dom_temp_int_min,function(){v_temp_errors++});var v_temp_diff=v_temp_int_min-v_temp_ext_min;v_dom_temp_ext_min.removeClass('error-param');v_dom_temp_int_min.removeClass('error-param');v_dom_temp_diff.removeClass('error-param');if(v_temp_errors){v_dom_temp_diff.text('??.?').addClass('error-param')}else{v_dom_temp_diff.text(v_temp_diff);if(v_temp_diff<=0){v_temp_errors++;v_dom_temp_ext_min.addClass('error-param');v_dom_temp_int_min.addClass('error-param');v_dom_temp_diff.addClass('error-param')}}var v_K=nWIZARD.heat.K[$('input[name=wizard-heaters-K]:checked').val()];var v_K_errors=0;if(v_K===undefined){ $('#K').addClass('error-param');v_K_errors++}else{ $('#K').removeClass('error-param')}var v_dom_P_kkal_h=$("#wizard-heaters-P-kkal-h");var v_dom_P_kVt=$("#wizard-heaters-P-kVt");var v_dom_P_btu=$("#wizard-heaters-P-btu");if(v_V_errors||v_temp_errors||v_K_errors){v_dom_P_kkal_h.text('??.?').addClass('error-param');v_dom_P_kVt.text('??.?').addClass('error-param');v_dom_P_btu.text('??.?').addClass('error-param');return Number.NaN}var v_P_kkal_h=v_V_int*v_temp_diff*v_K.max;v_dom_P_kkal_h.removeClass('error-param');v_dom_P_kVt.removeClass('error-param');v_dom_P_btu.removeClass('error-param');v_dom_P_kkal_h.text(v_P_kkal_h);v_dom_P_kVt.text(nWIZARD.f1round(nWIZARD.kklh2kVt(v_P_kkal_h)));v_dom_P_btu.text(nWIZARD.f1round(nWIZARD.kklh2BTE(v_P_kkal_h)));return nWIZARD.kklh2kVt(v_P_kkal_h)};nWIZARD.heaters={};nWIZARD.heaters.run=function(){var v_param={};v_param.m=[]; $('#wizard-heaters-manufacturer input[type=checkbox]:checked').each(function(){v_param.m.push(this.value)});v_param.price_min=$('#wizard-heaters-price-min').val().trim();v_param.price_max=$('#wizard-heaters-price-max').val().trim();var v_hpmax=nWIZARD.heat.calc();if(isNaN(v_hpmax)){return}v_hpmax=v_hpmax*1000;v_param.phmin=v_hpmax;v_param.phmax=Math.ceil(v_hpmax+v_hpmax/15);var v_href=window.location.origin+'/obogrevateli?'+nCOMMON.build_query(v_param);window.location.href=v_href};