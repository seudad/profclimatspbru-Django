"use strict"; $(document).ready(function(){nSESSION.init();var v_items=$('#unit-info-images .unit-info-images-item');var v_current=0;var v_images=$('#unit-info-images .unit-info-images-item'); $('#unit-info-image-sect').mouseover(function(){if(v_images.length===0){return} $('#unit-info-image-prev').show(); $('#unit-info-image-open').show(); $('#unit-info-image-next').show()}); $('#unit-info-image-sect').mouseout(function(){if(v_images.length===0){return} $('#unit-info-image-prev').hide(); $('#unit-info-image-open').hide(); $('#unit-info-image-next').hide()}); $('#unit-info-image-open').click(function(){nIMG.show($(v_images[v_current]).data())}); $(window).resize(function(){nIMG.resize()}); $('#unit-info-image-show').click(function(){ $(this).hide()}); $('#unit-info-image-prev').click(function(){console.log('#unit-info-image-prev.010:',v_images.length,v_current);v_current=(v_current===0?v_images.length-1:v_current-1); $(v_images[v_current]).click();console.log('#unit-info-image-prev.020:',v_images.length,v_current)}); $('#unit-info-image-next').click(function(){console.log('#unit-info-image-next.010:',v_images.length,v_current);v_current=(v_current===v_images.length-1?0:v_current+1); $(v_images[v_current]).click();console.log('#unit-info-image-next.020:',v_images.length,v_current)});v_items.on('click',function(){var v_data=$(this).data();var v_img=$('#unit-info-image');v_img.attr('src',v_data.src);v_img.attr('alt',v_data.alt);v_img.attr('title',v_data.alt);v_items.removeClass('unit-info-images-item-current'); $(this).addClass('unit-info-images-item-current')}); $('#unit-info-buy').click(function(){console.log('unit-info-buy',nSESSION.basket); $('#basket').show()}); $('#unit-info-buy').show(); $('#basket').click(function(){});nBASKET.show()});jQuery.fn.center=function(){this.css("position","fixed");this.css("top",(($(window).height()-this.outerHeight())/2)+"px");this.css("left",(($(window).width()-this.outerWidth())/2)+"px");return this};var nIMG={};nIMG.show=function(p_data){var v_src=p_data.src;var v_ww=$(window).width();var v_wh=$(window).height();var v_show=$('#unit-info-image-show');var v_img=$('#unit-info-image-show-img');v_img.attr('src',v_src);console.log('show: max-height:%d, max-width:%d',v_wh,v_ww);v_img.css({'max-height':v_wh+'px','max-width':v_ww+'px'}).center();v_show.show();v_img.center()};nIMG.resize=function(){var v_img=$('#unit-info-image-show-img');if(v_img.is(':visible')){var v_ww=$(window).width();var v_wh=$(window).height();v_img.css({'max-height':v_wh+'px','max-width':v_ww+'px'}).center()}};