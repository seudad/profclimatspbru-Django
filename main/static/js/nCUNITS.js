"use strict";var nCUNITS={id:'nCUNITS',state:{size:0,mtime:0},_loaded:false,list:{},order:[],price_min:0,price_max:9999999999,service_area_min:0,service_area_max:99999,noise_level_min1:0,noise_level_min2:100,noise_level_max1:0,noise_level_max2:100,power_cooling_min:0,power_cooling_max:100,power_heating_min:0,power_heating_max:100,units_show_format:'tile',incl_manufacturers:null,_counts:{'моноблок':{'оконный':0,'мобильный':0},'мультисплит-система':{'канальный':0,'кассетный':0,'колонный':0,'напольно-потолочный':0,'настенный':0},'сплит-система':{'канальный':0,'кассетный':0,'колонный':0,'напольно-потолочный':0,'настенный':0}},sort:{attr:'M+'},find:{set:function(){},test:function(){return false},ext:false,text:'',req:[]},_dummy_:null};nCUNITS.show_sizes=function(p_sizes){if(p_sizes.width===null){return''}return p_sizes.width+'×'+p_sizes.height+'×'+p_sizes.depth};nCUNITS.sort_units=function(p_list){if(nCUNITS.sort.attr==='M+'){return p_list.sort(function(a,b){var v_a=nCUNITS.list[a.manufacturer][a.utype][a.btype][a.model];var v_b=nCUNITS.list[b.manufacturer][b.utype][b.btype][b.model];v_a=a.manufacturer.rpad(' ',80)+a.model;v_b=b.manufacturer.rpad(' ',80)+b.model;if(v_a<v_b){return-1}if(v_a>v_b){return 1}return 0})}if(nCUNITS.sort.attr==='P+'){return p_list.sort(function(a,b){var v_a=nCUNITS.list[a.manufacturer][a.utype][a.btype][a.model];var v_b=nCUNITS.list[b.manufacturer][b.utype][b.btype][b.model];if(nUNITS.get_price(v_a)<nUNITS.get_price(v_b)){return-1}if(nUNITS.get_price(v_a)>nUNITS.get_price(v_b)){return 1}return 0})}if(nCUNITS.sort.attr==='P-'){return p_list.sort(function(a,b){var v_a=nCUNITS.list[a.manufacturer][a.utype][a.btype][a.model];var v_b=nCUNITS.list[b.manufacturer][b.utype][b.btype][b.model];if(nUNITS.get_price(v_a)>nUNITS.get_price(v_b)){return-1}if(nUNITS.get_price(v_a)<nUNITS.get_price(v_b)){return 1}return 0})}return p_list};nCUNITS.get_units=function(p_callback){var v_manufacturers=nCUNITS.get_manufacturer_filter();var v_units=[];for(var v_i=0;v_i<v_manufacturers.length;v_i++){var v_manufacturer=v_manufacturers[v_i];var v_utypes=nCUNITS.get_utypes_filter(v_manufacturer);for(var v_k2=0;v_k2<v_utypes.length;v_k2++){var v_utype=v_utypes[v_k2];var v_btypes=nCUNITS.get_btypes_filter(v_manufacturer,v_utype);for(var v_k3=0;v_k3<v_btypes.length;v_k3++){var v_btype=v_btypes[v_k3];var v_models=nCUNITS.get_models_filter(v_manufacturer,v_utype,v_btype);for(var v_k4=0;v_k4<v_models.length;v_k4++){var v_model=v_models[v_k4];v_units.push({manufacturer:v_manufacturer,utype:v_utype,btype:v_btype,model:v_model})}}}}v_units=nCUNITS.sort_units(v_units);for(var v_i=0;v_i<v_units.length;v_i++){p_callback(v_units[v_i].manufacturer,v_units[v_i].utype,v_units[v_i].btype,v_units[v_i].model)}};nCUNITS.get_manufacturers=function(){var v_manufacturers=[];for(var v_k in nCUNITS.list){v_manufacturers.push(v_k)}v_manufacturers=v_manufacturers.sort();return v_manufacturers};nCUNITS.get_utypes=function(p_manufacturer){var v_types=[];for(var v_k in nCUNITS.list[p_manufacturer]){v_types.push(v_k)}return v_types.sort()};nCUNITS.get_btypes=function(p_manufacturer,p_btype){var v_btypes=[];for(var v_k in nCUNITS.list[p_manufacturer][p_btype]){v_btypes.push(v_k)}return v_btypes.sort()};nCUNITS.get_models=function(p_manufacturer,p_utype,p_btype){var v_models=[];for(var v_k in nCUNITS.list[p_manufacturer][p_utype][p_btype]){v_models.push({id:v_k,ref:nCUNITS.list[p_manufacturer][p_utype][p_btype][v_k]})}return v_models.sort(function(a,b){if(a.id===b.id)return 0;if(a.id>b.id)return 1;return-1})};nCUNITS.count_units_in=function(p_manufacturer,p_utype,p_btype){var v_count=0;if(p_manufacturer&&p_utype&&p_btype){for(var v_model in nCUNITS.list[p_manufacturer][p_utype][p_btype]){v_count++}return v_count}if(p_manufacturer&&p_utype){for(var v_btype in nCUNITS.list[p_manufacturer][p_utype]){for(var v_model in nCUNITS.list[p_manufacturer][p_utype][v_btype]){v_count++}}return v_count}if(p_manufacturer){for(var v_utype in nCUNITS.list[p_manufacturer]){for(var v_btype in nCUNITS.list[p_manufacturer][v_utype]){for(var v_model in nCUNITS.list[p_manufacturer][v_utype][v_btype]){v_count++}}}return v_count}for(var v_manufacturer in nCUNITS.list){for(var v_utype in nCUNITS.list[v_manufacturer]){for(var v_btype in nCUNITS.list[v_manufacturer][v_utype]){for(var v_model in nCUNITS.list[v_manufacturer][v_utype][v_btype]){v_count++}}}}return v_count};nCUNITS.get_units_in=function(p_manufacturer,p_utype,p_btype){var v_models=[];if(p_manufacturer&&p_utype&&p_btype){for(var v_model in nCUNITS.list[p_manufacturer][p_utype][p_btype]){v_models.push({manufacturer:p_manufacturer,utype:p_utype,btype:p_btype,model:v_model,ref:nCUNITS.list[p_manufacturer][p_utype][p_btype][v_model]})}return v_models}if(p_manufacturer&&p_utype){for(var v_btype in nCUNITS.list[p_manufacturer][p_utype]){for(var v_model in nCUNITS.list[p_manufacturer][p_utype][v_btype]){v_models.push({manufacturer:p_manufacturer,utype:p_utype,btype:v_btype,model:v_model,ref:nCUNITS.list[p_manufacturer][p_utype][v_btype][v_model]})}}return v_models}if(p_manufacturer){for(var v_utype in nCUNITS.list[p_manufacturer]){for(var v_btype in nCUNITS.list[p_manufacturer][v_utype]){for(var v_model in nCUNITS.list[p_manufacturer][v_utype][v_btype]){v_models.push({manufacturer:p_manufacturer,utype:v_utype,btype:v_btype,model:v_model,ref:nCUNITS.list[p_manufacturer][v_utype][v_btype][v_model]})}}}return v_models}for(var v_manufacturer in nCUNITS.list){for(var v_utype in nCUNITS.list[v_manufacturer]){for(var v_btype in nCUNITS.list[v_manufacturer][v_utype]){for(var v_model in nCUNITS.list[v_manufacturer][v_utype][v_btype]){v_models.push({manufacturer:v_manufacturer,utype:v_utype,btype:v_btype,model:v_model,ref:nCUNITS.list[v_manufacturer][v_utype][v_btype][v_model]})}}}}return v_models};nCUNITS.get_unit=function(p_manufacturer,p_utype,p_btype,p_model){if(typeof(nCUNITS.list[p_manufacturer])==='undefined'){return undefined}else if(typeof(nCUNITS.list[p_manufacturer][p_utype])==='undefined'){return undefined}else if(typeof(nCUNITS.list[p_manufacturer][p_utype][p_btype])==='undefined'){return undefined}else if(typeof(nCUNITS.list[p_manufacturer][p_utype][p_btype][p_model])==='undefined'){return undefined}return nCUNITS.list[p_manufacturer][p_utype][p_btype][p_model]};nCUNITS.power_max=function(p_power){if(p_power.max){return p_power.max*1}if(p_power.rated){return p_power.rated*1}return 0};nCUNITS.f_air=function(p_air){if(p_air.min&&p_air.max){return p_air.min+'/'+p_air.max}if(p_air.max){return p_air.max}return"нет данных"};nCUNITS.list2order=function(){nCUNITS._counts={'моноблок':{_all_:0,'оконный':0,'мобильный':0},'мультисплит-система':{_all_:0,'канальный':0,'кассетный':0,'колонный':0,'напольно-потолочный':0,'настенный':0},'сплит-система':{_all_:0,'канальный':0,'кассетный':0,'колонный':0,'напольно-потолочный':0,'настенный':0}};nCUNITS._colors={'':0};nCUNITS.price_min=9999999999;nCUNITS.price_max=0;nCUNITS.service_area_min=5000;nCUNITS.service_area_max=0;nCUNITS.noise_level_min1=0;nCUNITS.noise_level_min2=100;nCUNITS.noise_level_max1=0;nCUNITS.noise_level_max2=100;nCUNITS.power_cooling_min=9999999;nCUNITS.power_cooling_max=0;nCUNITS.power_heating_min=9999999;nCUNITS.power_heating_max=0;for(var v_k1 in nCUNITS.list){for(var v_k2 in nCUNITS.list[v_k1]){for(var v_k3 in nCUNITS.list[v_k1][v_k2]){for(var v_k4 in nCUNITS.list[v_k1][v_k2][v_k3]){nCUNITS.order.push({manufacturer:v_k1,utype:v_k2,btype:v_k3,model:v_k4});var v_unit=nCUNITS.list[v_k1][v_k2][v_k3][v_k4];nCUNITS._counts[v_k2][v_k3]++;nCUNITS._counts[v_k2]._all_++;v_unit.price1=v_unit.price1*1;v_unit.price2=v_unit.price2*1;if(nCUNITS.price_min>nUNITS.get_price(v_unit)){nCUNITS.price_min=nUNITS.get_price(v_unit)}if(nCUNITS.price_max<nUNITS.get_price(v_unit)){nCUNITS.price_max=nUNITS.get_price(v_unit)}v_unit.power.cold.min=v_unit.power.cold.min*1;v_unit.power.cold.max=v_unit.power.cold.max*1;v_unit.power.cold.rated=v_unit.power.cold.rated*1;if(nCUNITS.power_cooling_min>nCUNITS.power_max(v_unit.power.cold)){nCUNITS.power_cooling_min=nCUNITS.power_max(v_unit.power.cold)}if(nCUNITS.power_cooling_max<nCUNITS.power_max(v_unit.power.cold)){nCUNITS.power_cooling_max=nCUNITS.power_max(v_unit.power.cold)}v_unit.power.heat.min=v_unit.power.heat.min*1;v_unit.power.heat.max=v_unit.power.heat.max*1;v_unit.power.heat.rated=v_unit.power.heat.rated*1;if(nCUNITS.power_heating_min>nCUNITS.power_max(v_unit.power.heat)){nCUNITS.power_heating_min=nCUNITS.power_max(v_unit.power.heat)}if(nCUNITS.power_heating_max<nCUNITS.power_max(v_unit.power.heat)){nCUNITS.power_heating_max=nCUNITS.power_max(v_unit.power.heat)}v_unit.color=(v_unit.color||'').toLowerCase();if(nCUNITS._colors[v_unit.color]){nCUNITS._colors[v_unit.color]++}else{nCUNITS._colors[v_unit.color]=1}}}}}};nCUNITS.load=function(p_callback){nDATA.load('cunits',function(p_res){nCUNITS.state=p_res.state;nCUNITS.list=p_res.data;nCUNITS.list2order();if(typeof(p_callback)==='function'){p_callback(p_res)}})};nCUNITS.hide=function(){ $('#cunits').hide()};nCUNITS.show=function(){ $('#check-tip').hide();if(nCUNITS._loaded){ $('#cunits').show()}else{nCUNITS.refresh_units(function(){ $('#cunits').show()})}};