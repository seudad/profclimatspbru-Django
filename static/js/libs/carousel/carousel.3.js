"use strict";if(!Math.trunc){Math.trunc=function(p_val){return(p_val>=0?Math.floor(p_val):-Math.floor(Math.abs(p_val)))}}function nCAROUSEL(p_pfx){this.pfx=p_pfx;this.ul=$('#'+this.pfx+'-list');this.items=this.ul.find("div.carousel-item");this.last_no=this.items.length-1;this.no=0;this.step=$(this.items[0]).outerWidth();this.width=this.ul.parent().width();this.width_no=Math.trunc(this.width/this.step);this.epsilon=function(){return 10};this.ctrl_width=function(){return 80};if(this.ul.length===0){this.set_numbers=function(){};this.set_index=function(){};this.rshift_off=function(){};this.rshift_on=function(){};this.lshift_off=function(){};this.lshift_on=function(){};this.calc_margin=function(){return 0};this.rshift=function(){};this.lshift=function(){};this.resize=function(){};return this}this.set_numbers=function(p_css){var v_items=$('#'+this.pfx+'-list div.carousel-item');var v_css={'position':'absolute','left':'2pt','top':'2pt','font-size':'14pt','font-weight':'bold','color':'red'};if(p_css){for(var v_k in p_css){v_css[v_k]=p_css[v_k]}}for(var v_i=0;v_i<v_items.length;v_i++){ $(v_items[v_i]).css({position:'relative'});var v_span=$('<span/>',{text:(v_i+1).toString(),css:v_css}); $(v_items[v_i]).append(v_span)}};this.set_index=function(p_css){var v_items=$('#'+this.pfx+'-list div.carousel-item');var v_css={'position':'absolute','left':'2pt','top':'2pt','font-size':'14pt','font-weight':'bold','color':'blue'};if(p_css){for(var v_k in p_css){v_css[v_k]=p_css[v_k]}}for(var v_i=0;v_i<v_items.length;v_i++){ $(v_items[v_i]).css({position:'relative'});var v_span=$('<span/>',{text:v_i.toString(),css:v_css}); $(v_items[v_i]).append(v_span)}};this.rshift_off=function(){document.getElementById(this.pfx+'-arrow_right').style.opacity=0.3};this.rshift_on=function(){document.getElementById(this.pfx+'-arrow_right').style.opacity=1.0};this.lshift_off=function(){document.getElementById(this.pfx+'-arrow_left').style.opacity=0.3};this.lshift_on=function(){document.getElementById(this.pfx+'-arrow_left').style.opacity=1.0};this.calc_margin=function(){var v_margin;var v_i0=$(this.items[0]).position().left;var v_in=$(this.items[this.no]).position().left;if((v_i0<0)&&(v_in>0)){v_margin=-(Math.abs(v_i0)+v_in)}else if((v_i0<0)&&(v_in<0)){v_margin=-(Math.abs(v_i0)-Math.abs(v_in))}else{v_margin=-v_in}return v_margin};this.rshift=function(){var v_margin=0;this.width=this.ul.parent().width();this.width_no=Math.trunc(this.width/this.step);if(this.last_no+1<this.width_no){this.rshift_off();this.lshift_off();return}this.no--;if(this.no<=0){v_margin=0;this.no=0;this.rshift_off()}else{v_margin=this.calc_margin()}this.lshift_on();this.ul.css({marginLeft:v_margin+'px'})};this.lshift=function(){var v_margin=0;this.width=this.ul.parent().width();this.width_no=Math.trunc(this.width/this.step);if(this.last_no+1<this.width_no){this.rshift_off();this.lshift_off();return}this.no++;this.rshift_on();if(this.no+this.width_no-1>this.last_no){this.no=this.last_no-this.width_no+1;v_margin=this.calc_margin();this.lshift_off()}else{this.lshift_on();v_margin=this.calc_margin()}this.ul.css({marginLeft:v_margin+'px'})};this.resize=function(){var v_max_width=$('#'+this.pfx).innerWidth();var v_ctrl_width=this.ctrl_width();var v_cw_width=v_max_width-v_ctrl_width-this.epsilon();var v_cwin=$('#'+this.pfx+'-win');v_cwin.width(v_cw_width);var v_margin=this.calc_margin();this.ul.css({marginLeft:v_margin});return};if(this.last_no+1<this.width_no){this.rshift_off();this.lshift_off()}else{this.rshift_off();this.lshift_on()}var v_self=this;document.getElementById(this.pfx+'-arrow_right').onclick=function(){v_self.rshift()};document.getElementById(this.pfx+'-arrow_left').onclick=function(){v_self.lshift()}; $(window).resize(function(){v_self.resize()});this.resize()}