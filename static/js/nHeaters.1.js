"use strict";var nHUNITS={_dummy_:null};nHUNITS.price_min=function(){return Number($('#price-min').val())};nHUNITS.price_max=function(){return Number($('#price-max').val())};nHUNITS.service_area_min=function(){return Number($('#service_area-min').val())};nHUNITS.service_area_max=function(){return Number($('#service_area-max').val())};nHUNITS.noise_level_min=function(){return Number($('#noise_level-min').val())};nHUNITS.noise_level_max=function(){return Number($('#noise_level-max').val())};nHUNITS.power_heating_min=function(){return Number($('#power_heating-min').val())};nHUNITS.power_heating_max=function(){return Number($('#power_heating-max').val())};nHUNITS.req_price_min=function(){return Number($('#req_price-min').val())};nHUNITS.req_price_max=function(){return Number($('#req_price-max').val())};nHUNITS.req_service_area_min=function(){return Number($('#req_service_area-min').val())};nHUNITS.req_service_area_max=function(){return Number($('#req_service_area-max').val())};nHUNITS.req_noise_level_min=function(){return Number($('#req_noise_level-min').val())};nHUNITS.req_noise_level_max=function(){return Number($('#req_noise_level-max').val())};nHUNITS.req_power_cooling_min=function(){return Number($('#req_power_cooling-min').val())};nHUNITS.req_power_cooling_max=function(){return Number($('#req_power_cooling-max').val())};nHUNITS.req_power_heating_min=function(){return Number($('#req_power_heating-min').val())};nHUNITS.req_power_heating_max=function(){return Number($('#req_power_heating-max').val())};nHUNITS.filter_price_init=function(){var v_step=Number($("#hunits-filter-price-min").attr('step')); $("#hunits-filter-price-min").attr('min',nHUNITS.price_min()); $("#hunits-filter-price-min").attr('max',nHUNITS.price_max()); $("#hunits-filter-price-min").val(nHUNITS.req_price_min()); $("#hunits-filter-price-max").attr('min',nHUNITS.price_min()); $("#hunits-filter-price-max").attr('max',nHUNITS.price_max()); $("#hunits-filter-price-max").val(nHUNITS.req_price_max()); $("#hunits-filter-price-slider").slider({animate:true,values:[nHUNITS.req_price_min(),nHUNITS.req_price_max()],range:true,min:nHUNITS.price_min(),max:nHUNITS.price_max(),step:v_step,slide:function(event,ui){ $("#hunits-filter-price-min").val(ui.values[0]); $("#hunits-filter-price-max").val(ui.values[1])},change:function(event,ui){console.log('price.020:',ui.values); $("#hunits-filter-price-min").val(ui.values[0]); $("#hunits-filter-price-max").val(ui.values[1])}}); $('#hunits-filter-price-min').change(function(e){ $('#hunits-filter-price-slider').slider("values",0, $(this).val())}); $('#hunits-filter-price-max').change(function(e){ $('#hunits-filter-price-slider').slider("values",1, $(this).val())})};nHUNITS.filter_price_reset=function(){ $("#hunits-filter-price-min").attr('min',nHUNITS.price_min()); $("#hunits-filter-price-min").attr('max',nHUNITS.price_max()); $("#hunits-filter-price-min").val(nHUNITS.price_min); $("#hunits-filter-price-max").attr('min',nHUNITS.price_min()); $("#hunits-filter-price-max").attr('max',nHUNITS.price_max()); $("#hunits-filter-price-max").val(nHUNITS.price_min()); $('#hunits-filter-price-slider').slider("values",0,nHUNITS.price_min()); $('#hunits-filter-price-slider').slider("values",1,nHUNITS.price_max())};nHUNITS.filter_service_area_init=function(){var v_step=Number($("#hunits-filter-service_area-min").attr('step')); $("#hunits-filter-service_area-min").attr('min',nHUNITS.service_area_min()); $("#hunits-filter-service_area-max").attr('max',nHUNITS.service_area_max());var v_units_filter_service_area_min=parseInt($("#hunits-filter-service_area-min").attr('min').trim(),10);var v_units_filter_service_area_max=parseInt($("#hunits-filter-service_area-max").attr('max').trim(),10); $("#hunits-filter-service_area-slider").slider({animate:true,values:[v_units_filter_service_area_min,v_units_filter_service_area_max],range:true,min:v_units_filter_service_area_min,max:v_units_filter_service_area_max,step:v_step,slide:function(event,ui){ $("#hunits-filter-service_area-min").val(ui.values[0]); $("#hunits-filter-service_area-max").val(ui.values[1])},change:function(event,ui){ $("#hunits-filter-service_area-min").val(ui.values[0]); $("#hunits-filter-service_area-max").val(ui.values[1])}}); $('#hunits-filter-service_area-min').change(function(e){ $('#hunits-filter-service_area-slider').slider("values",0, $(this).val())}); $('#hunits-filter-service_area-max').change(function(e){ $('#hunits-filter-service_area-slider').slider("values",1, $(this).val())}); $('#hunits-filter-service_area-min').change(); $('#hunits-filter-service_area-max').change()};nHUNITS.filter_noise_level_init=function(){var v_step=Number($("#hunits-filter-noise_level-min1").attr('step')); $("#hunits-filter-noise_level-min1").attr('min',nHUNITS.noise_level_min()); $("#hunits-filter-noise_level-min2").attr('max',nHUNITS.noise_level_min()); $("#hunits-filter-noise_level-min1").attr('value',nHUNITS.noise_level_min()); $("#hunits-filter-noise_level-min2").attr('value',nHUNITS.noise_level_min()); $("#hunits-filter-noise_level-max1").attr('min',nHUNITS.noise_level_max()); $("#hunits-filter-noise_level-max2").attr('max',nHUNITS.noise_level_max()); $("#hunits-filter-noise_level-max1").attr('value',nHUNITS.noise_level_max()); $("#hunits-filter-noise_level-max2").attr('value',nHUNITS.noise_level_max());var v_units_filter_noise_level_min1=parseInt($("#hunits-filter-noise_level-min1").attr('min').trim(),10);var v_units_filter_noise_level_min2=parseInt($("#hunits-filter-noise_level-min2").attr('max').trim(),10); $("#hunits-filter-noise_level-min-slider").slider({animate:true,values:[v_units_filter_noise_level_min1,v_units_filter_noise_level_min2],range:true,min:v_units_filter_noise_level_min1,max:v_units_filter_noise_level_min2,step:v_step,slide:function(event,ui){ $("#hunits-filter-noise_level-min1").val(ui.values[0]); $("#hunits-filter-noise_level-min2").val(ui.values[1])},change:function(event,ui){ $("#hunits-filter-noise_level-min1").val(ui.values[0]); $("#hunits-filter-noise_level-min2").val(ui.values[1])}}); $('#hunits-filter-noise_level-min1').change(function(e){ $('#hunits-filter-noise_level-slider').slider("values",0, $(this).val())}); $('#hunits-filter-noise_level-min2').change(function(e){ $('#hunits-filter-noise_level-slider').slider("values",1, $(this).val())});var v_units_filter_noise_level_max1=parseInt($("#hunits-filter-noise_level-max1").attr('min').trim(),10);var v_units_filter_noise_level_max2=parseInt($("#hunits-filter-noise_level-max2").attr('max').trim(),10); $("#hunits-filter-noise_level-max-slider").slider({animate:true,values:[v_units_filter_noise_level_max1,v_units_filter_noise_level_max2],range:true,min:v_units_filter_noise_level_max1,max:v_units_filter_noise_level_max2,step:1,slide:function(event,ui){ $("#hunits-filter-noise_level-max1").val(ui.values[0]); $("#hunits-filter-noise_level-max2").val(ui.values[1])},change:function(event,ui){ $("#hunits-filter-noise_level-max1").val(ui.values[0]); $("#hunits-filter-noise_level-max2").val(ui.values[1])}}); $('#hunits-filter-noise_level-max1').change(function(e){ $('#hunits-filter-noise_level-slider').slider("values",0, $(this).val())}); $('#hunits-filter-noise_level-max2').change(function(e){ $('#hunits-filter-noise_level-slider').slider("values",1, $(this).val())}); $('#hunits-filter-noise_level-min1').change(); $('#hunits-filter-noise_level-min2').change(); $('#hunits-filter-noise_level-max1').change(); $('#hunits-filter-noise_level-max2').change()};nHUNITS.filter_noise_level_reset=function(){ $("#hunits-filter-noise_level-min1").attr('min',nHUNITS.noise_level_min()); $("#hunits-filter-noise_level-min1").attr('max',nHUNITS.noise_level_max()); $("#hunits-filter-noise_level-min2").attr('min',nHUNITS.noise_level_min()); $("#hunits-filter-noise_level-min2").attr('max',nHUNITS.noise_level_max()); $("#hunits-filter-noise_level-min1").val(nHUNITS.noise_level_min()); $("#hunits-filter-noise_level-min2").val(nHUNITS.noise_level_max()); $("#hunits-filter-noise_level-max1").attr('min',nHUNITS.noise_level_min()); $("#hunits-filter-noise_level-max1").attr('max',nHUNITS.noise_level_max()); $("#hunits-filter-noise_level-max2").attr('min',nHUNITS.noise_level_min()); $("#hunits-filter-noise_level-max2").attr('max',nHUNITS.noise_level_max()); $("#hunits-filter-noise_level-max1").val(nHUNITS.noise_level_min()); $("#hunits-filter-noise_level-max2").val(nHUNITS.noise_level_max()); $('#hunits-filter-noise_level-min-slider').slider("values",0,nHUNITS.noise_level_min()); $('#hunits-filter-noise_level-min-slider').slider("values",1,nHUNITS.noise_level_max()); $('#hunits-filter-noise_level-max-slider').slider("values",0,nHUNITS.noise_level_min()); $('#hunits-filter-noise_level-max-slider').slider("values",1,nHUNITS.noise_level_max()); $('#hunits-filter-noise_level-min1').change(); $('#hunits-filter-noise_level-min2').change(); $('#hunits-filter-noise_level-max1').change(); $('#hunits-filter-noise_level-max2').change()};nHUNITS.filter_power_heating_init=function(){var v_step=Number($("#hunits-filter-power_heating-min").attr('step')); $("#hunits-filter-power_heating-min").attr('min',nHUNITS.power_heating_min()); $("#hunits-filter-power_heating-min").attr('max',nHUNITS.power_heating_max()); $("#hunits-filter-power_heating-min").val(nHUNITS.req_power_heating_min()); $("#hunits-filter-power_heating-max").attr('min',nHUNITS.power_heating_min()); $("#hunits-filter-power_heating-max").attr('max',nHUNITS.power_heating_max()); $("#hunits-filter-power_heating-max").val(nHUNITS.req_power_heating_max()); $("#hunits-filter-power_heating-slider").slider({animate:true,values:[nHUNITS.req_power_heating_min(),nHUNITS.req_power_heating_max()],range:true,min:nHUNITS.power_heating_min(),max:nHUNITS.power_heating_max(),step:v_step,slide:function(event,ui){ $("#hunits-filter-power_heating-min").val(ui.values[0]); $("#hunits-filter-power_heating-max").val(ui.values[1])},change:function(event,ui){ $("#hunits-filter-power_heating-min").val(ui.values[0]); $("#hunits-filter-power_heating-max").val(ui.values[1])}}); $('#hunits-filter-power_heating-min').change(function(e){ $('#hunits-filter-power_heating-slider').slider("values",0, $(this).val())}); $('#hunits-filter-power_heating-max').change(function(e){ $('#hunits-filter-power_heating-slider').slider("values",1, $(this).val())})};nHUNITS.filter_power_heating_reset=function(){ $("#hunits-filter-power_heating-min").attr('min',nHUNITS.power_heating_min()); $("#hunits-filter-power_heating-min").attr('max',nHUNITS.power_heating_max()); $("#hunits-filter-power_heating-min").val(nHUNITS.power_heating_min()); $("#hunits-filter-power_heating-max").attr('min',nHUNITS.power_heating_min()); $("#hunits-filter-power_heating-max").attr('max',nHUNITS.power_heating_max()); $("#hunits-filter-power_heating-max").val(nHUNITS.power_heating_max()); $('#hunits-filter-power_heating-slider').slider("values",0,nHUNITS.power_heating_min()); $('#hunits-filter-power_heating-slider').slider("values",1,nHUNITS.power_heating_max())};nHUNITS.filter_init=function(){nHUNITS.filter_price_init();nHUNITS.filter_power_heating_init()};nHUNITS.filter_reset=function(){nHUNITS.filter_price_reset();nHUNITS.filter_power_heating_reset(); $('#hunits-filter-manufacturer input[type=checkbox]').each(function(){if(!$(this).is(':checked')){ $(this).prop('checked',true); $(this).trigger('change')}}); $('#hunits-filter-work_mode input[type=checkbox]').each(function(){if(!$(this).is(':checked')){ $(this).prop('checked',true); $(this).trigger('change')}}); $('#hunits-filter-utype input[type=checkbox]').each(function(){if(!$(this).is(':checked')){ $(this).prop('checked',true); $(this).trigger('change')}})};nHUNITS.get_list_manufactures_on=function(){var v_manufactures={}; $('#hunits-filter-manufacturer input[name=filter-manufacturer]:checked').each(function(){v_manufactures[this.value]=true});return v_manufactures};nHUNITS.get_list_utypes_on=function(){var v_utypes={}; $('#hunits-filter-btype input[name=filter-utype]:checked').each(function(){v_utypes[this.value]=true});return v_utypes};nHUNITS.get_array_manufactures_on=function(){var v_manufactures=[]; $('#hunits-filter-manufacturer input[name=filter-manufacturer]:checked').each(function(){v_manufactures.push(this.value)});return v_manufactures};nHUNITS.get_array_utypes_on=function(){var v_utypes=[]; $('#hunits-filter-utype input[name=filter-utype]:checked').each(function(){v_utypes.push(this.value)});return v_utypes};nHUNITS.filter_use=function(){var v_manufacturers=nHUNITS.get_array_manufactures_on();var v_utypes=nHUNITS.get_array_utypes_on();var v_vars=$.getUrlVars();v_vars.m=v_manufacturers.join(',');v_vars.ut=v_utypes.join(',');v_vars.price_min=$("#hunits-filter-price-min").val();v_vars.price_max=$("#hunits-filter-price-max").val();v_vars.phmin=Number($('#hunits-filter-power_heating-min').val().trim())*1000;v_vars.phmax=Number($('#hunits-filter-power_heating-max').val().trim())*1000;console.log('v_vars:',v_vars);var v_search=$.buildParams(v_vars);console.log('v_search:',v_search);var v_url=window.location.origin+window.location.pathname+v_search;console.log('v_url:',v_url);window.history.pushState(null,null,v_url); $.ajax({url:v_url+'&q=1',async:true,success:function(p_data){ $('#hunits-list').html(p_data);nHUNITS.tollbar_counts_set(Number($("#units-count-show").val()),Number($("#units-count-all").val()))}})};nHUNITS.tollbar_counts_get=function(){return{show:parseInt($('#units-toolbar-count-show').text().trim(),10),all:parseInt($('#units-toolbar-count-all').text().trim(),10)}};nHUNITS.tollbar_counts_set=function(p_show,p_all){ $('#units-toolbar-count-show').text(p_show.toString()); $('#units-toolbar-count-all').text(p_all.toString())};nHUNITS.toolbar_show_table=function(){ $('#units-toolbar-show-table').css({color:'#000000'}); $('#units-toolbar-show-tile').css({color:'#bbbbbb'})};nHUNITS.toolbar_show_tile=function(){ $('#units-toolbar-show-table').css({color:'#bbbbbb'}); $('#units-toolbar-show-tile').css({color:'#000000'})}; $(document).ready(function(){nPOPUPMENU.init('#units-toolbar-sort');nPOPUPMENU.init('#units-toolbar-psize');if($('#req-format').val()==='table'){nHUNITS.toolbar_show_table()}else{nHUNITS.toolbar_show_tile()}nPOPUPMENU.set('#units-toolbar-sort', $('#req-sort').val());nPOPUPMENU.set('#units-toolbar-psize',Number($('#req-pgsize').val()));nPOPUPMENU.change('#units-toolbar-sort',function(){var v_args=$.getUrlVars();v_args.sort=$('#units-toolbar-sort').data('value');var v_params=$.buildParams(v_args);var v_url=window.location.origin+window.location.pathname;window.location.href=v_url+v_params});nPOPUPMENU.change('#units-toolbar-psize',function(){var v_args=$.getUrlVars();v_args.psz=$('#units-toolbar-psize').data('value');var v_params=$.buildParams(v_args);var v_url=window.location.origin+window.location.pathname;window.location.href=v_url+v_params}); $('#units-toolbar-show-tile').click(function(p_event){p_event.preventDefault();var v_args=$.getUrlVars();v_args.f='tile';var v_params=$.buildParams(v_args);var v_url=window.location.origin+window.location.pathname;window.location.href=v_url+v_params}); $('#units-toolbar-show-table').click(function(p_event){p_event.preventDefault();var v_args=$.getUrlVars();v_args.f='table';var v_params=$.buildParams(v_args);var v_url=window.location.origin+window.location.pathname;window.location.href=v_url+v_params}); $('#hunits-filter-manufacturer-pop').click(function(){}); $('#hunits-filter-manufacturer-all').click(function(){}); $("#hunits-list").on('click','.unit-item-buy',nBASKET.buy); $('#hunits-filter-manufacturer').on('change','input[type=checkbox]',function(){nHUNITS.filter_use();return}); $('#hunits-filter-utype').on('change','input[type=checkbox]',function(){nHUNITS.filter_use();return});nHUNITS.filter_init(); $('#hunits-filter-use').click(nHUNITS.filter_use); $('#hunits-filter-clear').click(function(){nHUNITS.filter_reset();nHUNITS.filter_use()});nUSER.init();nFIND.init();var v_params=$.getUrlVars();var v_vars=$.getUrlVars();v_vars.f='tile'; $('#units-toolbar-show-tile').attr('href','?'+ $.buildParams(v_vars));v_vars.f='table'; $('#units-toolbar-show-table').attr('href','?'+ $.buildParams(v_vars));v_vars=$.getUrlVars(); $('#units-toolbar-refresh').attr('href', $.buildParams(v_vars)); $('#units-toolbar-refresh').click(function(){nHUNITS.filter_use();return});if(0&&v_params.m){var v_m=v_params.m.split(',');var v_manufacturers={};for(var v_i=0;v_i<v_m.length;v_i++){v_manufacturers[unescape(v_m[v_i])]=true} $('#hunits-filter-manufacturer input[name=filter-manufacturer]').each(function(){ $(this).prop('checked',(v_manufacturers[this.value]?true:false))});if(v_params.pmin){ $("#hunits-filter-price-min").val(v_params.pmin); $("#hunits-filter-price-min").change()}if(v_params.pmax){ $("#hunits-filter-price-max").val(v_params.pmax); $("#hunits-filter-price-max").change()}if(v_params.hpmin){ $('#hunits-filter-power_heating-min').val(v_params.hpmin); $('#hunits-filter-power_heating-min').change()}if(v_params.hpmax){ $('#hunits-filter-power_heating-max').val(v_params.hpmax); $('#hunits-filter-power_heating-max').change()}nHUNITS.filter_use()}});