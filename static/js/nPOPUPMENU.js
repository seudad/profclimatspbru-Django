var nPOPUPMENU={list:{},onchange:{},_dummy_:null};nPOPUPMENU.init=function(p_menu,p_callback){var v_menu=$(p_menu);if(v_menu.length!==1){return v_menu}var v_menu_id=v_menu.attr('id');nPOPUPMENU.list[v_menu_id]={opened:false};var v_list=$('#'+v_menu.data('list'));v_list.hide();v_list.data('menu',v_menu_id);if(typeof(p_callback)==='function'){nPOPUPMENU.onchange[v_menu_id]=p_callback}v_menu.click(function(){if(nPOPUPMENU.list[v_menu_id].opened){ $('#'+ $(this).data('list')).hide();nPOPUPMENU.list[v_menu_id].opened=false}else{nPOPUPMENU.show($(this));nPOPUPMENU.list[v_menu_id].opened=true}});v_list.on('click','div',function(){var v_item=$(this);var v_list=v_item.parent();var v_val=v_item.data('value');var v_menu=$('#'+v_list.data('menu'));v_menu.data('value',v_val);v_menu.text(v_item.text());v_list.hide();nPOPUPMENU.list[v_menu_id].opened=false;var v_callback=nPOPUPMENU.onchange[v_menu.attr('id')];if(typeof(v_callback)==='function'){v_callback()}});return v_menu};nPOPUPMENU.change=function(p_menu,p_callback){var v_menu=$(p_menu);if(v_menu.length!==1){return v_menu}var v_list=$('#'+v_menu.data('list'));if(typeof(p_callback)==='function'){nPOPUPMENU.onchange[v_menu.attr('id')]=p_callback}return v_menu};nPOPUPMENU.show=function(p_menu){var v_menu=$(p_menu);if(v_menu.length!==1){return v_menu}var v_pos=v_menu.position();var v_width=v_menu.width();var v_height=v_menu.outerHeight();var v_win={width: $(window).width(),height: $(window).height()};var v_top=v_pos.top+v_height;var v_left=v_pos.left;var v_list=$('#'+v_menu.data('list'));v_list.css({top:v_top,left:v_left});v_list.show();return v_menu};nPOPUPMENU.set=function(p_menu,p_value){var v_menu=$(p_menu);if(v_menu.length!==1){return v_menu}var v_find='#'+v_menu.data('list').toString()+' div[data-value="'+p_value+'"]';var v_item=$(v_find);if(v_item.length!==1){return}v_menu.data('value',p_value);v_menu.text(v_item.text());return v_menu};nPOPUPMENU.hide=function(p_menu){return($(p_menu).length!==1? $(p_menu): $(p_menu).hide())};